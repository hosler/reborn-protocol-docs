

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reborn Protocol v2 - Packet Structure Reference &mdash; Reborn Protocol Reference</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Encryption Details" href="encryption.html" />
    <link rel="prev" title="Protocol Overview" href="overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Reborn Protocol Reference
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Protocol Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Reborn Protocol v2 - Packet Structure Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#protocol-architecture">Protocol Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#packet-bundle-structure">Packet Bundle Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bundle-processing-gen-5-protocol">Bundle Processing (GEN_5 Protocol)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#individual-packet-structure">Individual Packet Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-encoding-types">Data Encoding Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reborn-specific-encoding-g-types">Reborn-Specific Encoding (G-Types)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#string-encoding">String Encoding</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#client-to-server-packets-pli">Client-to-Server Packets (PLI_*)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pli-levelwarp-0-level-warp-request">PLI_LEVELWARP (0) - Level Warp Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-boardmodify-1-tile-modification">PLI_BOARDMODIFY (1) - Tile Modification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-playerprops-2-player-property-update">PLI_PLAYERPROPS (2) - Player Property Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-npcprops-3-npc-property-update">PLI_NPCPROPS (3) - NPC Property Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-bombadd-4-place-bomb">PLI_BOMBADD (4) - Place Bomb</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-bombdel-5-remove-bomb">PLI_BOMBDEL (5) - Remove Bomb</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-toall-6-chat-message">PLI_TOALL (6) - Chat Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-horseadd-7-add-horse">PLI_HORSEADD (7) - Add Horse</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-horsedel-8-remove-horse">PLI_HORSEDEL (8) - Remove Horse</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-arrowadd-9-shoot-arrow">PLI_ARROWADD (9) - Shoot Arrow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-firespy-10-fire-spy">PLI_FIRESPY (10) - Fire Spy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-throwcarried-11-throw-carried-object">PLI_THROWCARRIED (11) - Throw Carried Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-itemadd-12-drop-item">PLI_ITEMADD (12) - Drop Item</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-itemdel-13-remove-item">PLI_ITEMDEL (13) - Remove Item</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-itemtake-32-pick-up-item">PLI_ITEMTAKE (32) - Pick Up Item</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-claimpker-14-claim-player-kill">PLI_CLAIMPKER (14) - Claim Player Kill</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-baddyprops-15-baddy-property-update">PLI_BADDYPROPS (15) - Baddy Property Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-baddyhurt-16-hurt-baddy">PLI_BADDYHURT (16) - Hurt Baddy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-baddyadd-17-add-baddy">PLI_BADDYADD (17) - Add Baddy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-flagset-18-set-flag-variable">PLI_FLAGSET (18) - Set Flag/Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-flagdel-19-delete-flag-variable">PLI_FLAGDEL (19) - Delete Flag/Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-openchest-20-open-chest">PLI_OPENCHEST (20) - Open Chest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-putnpc-21-place-npc">PLI_PUTNPC (21) - Place NPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-npcdel-22-delete-npc">PLI_NPCDEL (22) - Delete NPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-wantfile-23-request-file">PLI_WANTFILE (23) - Request File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-showimg-24-show-image">PLI_SHOWIMG (24) - Show Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-hurtplayer-26-hurt-player">PLI_HURTPLAYER (26) - Hurt Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-explosion-27-create-explosion">PLI_EXPLOSION (27) - Create Explosion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-privatemessage-28-private-message">PLI_PRIVATEMESSAGE (28) - Private Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-npcweapondel-29-delete-npc-weapon">PLI_NPCWEAPONDEL (29) - Delete NPC Weapon</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-weaponadd-33-add-weapon">PLI_WEAPONADD (33) - Add Weapon</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-updatefile-34-file-update-check">PLI_UPDATEFILE (34) - File Update Check</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-adjacentlevel-35-request-adjacent-level">PLI_ADJACENTLEVEL (35) - Request Adjacent Level</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-hitobjects-36-hit-objects">PLI_HITOBJECTS (36) - Hit Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-language-37-set-language">PLI_LANGUAGE (37) - Set Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-triggeraction-38-trigger-action">PLI_TRIGGERACTION (38) - Trigger Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-mapinfo-39-map-information">PLI_MAPINFO (39) - Map Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-shoot-40-shoot-projectile-v1">PLI_SHOOT (40) - Shoot Projectile (v1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-shoot2-48-shoot-projectile-v2">PLI_SHOOT2 (48) - Shoot Projectile (v2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-serverwarp-41-server-warp-request">PLI_SERVERWARP (41) - Server Warp Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-muteplayer-43-mute-player">PLI_MUTEPLAYER (43) - Mute Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-processlist-44-process-list">PLI_PROCESSLIST (44) - Process List</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-verifywantsend-47-verify-file-checksum">PLI_VERIFYWANTSEND (47) - Verify File Checksum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rawdata-50-raw-data-marker">PLI_RAWDATA (50) - Raw Data Marker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#player-properties-pli-playerprops-data">Player Properties (PLI_PLAYERPROPS Data)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#property-encodings-by-type">Property Encodings by Type:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#remote-control-packets-pli-rc">Remote Control Packets (PLI_RC_*)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-serveroptionsget-51-get-server-options">PLI_RC_SERVEROPTIONSGET (51) - Get Server Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-serveroptionsset-52-set-server-options">PLI_RC_SERVEROPTIONSSET (52) - Set Server Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-folderconfigget-53-get-folder-config">PLI_RC_FOLDERCONFIGGET (53) - Get Folder Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-folderconfigset-54-set-folder-config">PLI_RC_FOLDERCONFIGSET (54) - Set Folder Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-playerpropsget-59-get-player-properties">PLI_RC_PLAYERPROPSGET (59) - Get Player Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-playerpropsset-60-set-player-properties">PLI_RC_PLAYERPROPSSET (60) - Set Player Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-disconnectplayer-61-disconnect-player">PLI_RC_DISCONNECTPLAYER (61) - Disconnect Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-adminmessage-63-admin-message">PLI_RC_ADMINMESSAGE (63) - Admin Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-privadminmessage-64-private-admin-message">PLI_RC_PRIVADMINMESSAGE (64) - Private Admin Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-serverflagsget-68-get-server-flags">PLI_RC_SERVERFLAGSGET (68) - Get Server Flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-serverflagsset-69-set-server-flags">PLI_RC_SERVERFLAGSSET (69) - Set Server Flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-accountadd-70-add-account">PLI_RC_ACCOUNTADD (70) - Add Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-accountdel-71-delete-account">PLI_RC_ACCOUNTDEL (71) - Delete Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-rc-filebrowser-file-browser-operations">PLI_RC_FILEBROWSER_* - File Browser Operations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#npc-control-packets-pli-nc">NPC Control Packets (PLI_NC_*)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pli-nc-npcget-103-get-npc">PLI_NC_NPCGET (103) - Get NPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-nc-npcdelete-104-delete-npc">PLI_NC_NPCDELETE (104) - Delete NPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-nc-npcscriptget-106-get-npc-script">PLI_NC_NPCSCRIPTGET (106) - Get NPC Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-nc-npcscriptset-109-set-npc-script">PLI_NC_NPCSCRIPTSET (109) - Set NPC Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-nc-npcadd-111-add-npc">PLI_NC_NPCADD (111) - Add NPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-nc-weaponlistget-115-get-weapon-list">PLI_NC_WEAPONLISTGET (115) - Get Weapon List</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-nc-weaponget-116-get-weapon">PLI_NC_WEAPONGET (116) - Get Weapon</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-nc-weaponadd-117-add-weapon">PLI_NC_WEAPONADD (117) - Add Weapon</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#special-packets">Special Packets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pli-requestupdateboard-130-request-level-update">PLI_REQUESTUPDATEBOARD (130) - Request Level Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-requesttext-152-request-server-text">PLI_REQUESTTEXT (152) - Request Server Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-sendtext-154-send-server-text">PLI_SENDTEXT (154) - Send Server Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-updategani-157-update-gani-animation">PLI_UPDATEGANI (157) - Update GANI Animation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-updatescript-158-update-weapon-script">PLI_UPDATESCRIPT (158) - Update Weapon Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-updateclass-161-update-npc-class">PLI_UPDATECLASS (161) - Update NPC Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pli-updatepackagerequestfile-159-update-package-request">PLI_UPDATEPACKAGEREQUESTFILE (159) - Update Package Request</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#encryption-details-encrypt-gen-5">Encryption Details (ENCRYPT_GEN_5)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#key-generation">Key Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encryption-limits">Encryption Limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decryption-process">Decryption Process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-type-reference">Data Type Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implementation-notes">Implementation Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#server-to-client-packets-plo">Server-to-Client Packets (PLO_*)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#plo-levelboard-0-level-board-data">PLO_LEVELBOARD (0) - Level Board Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-levellink-1-level-link-warp">PLO_LEVELLINK (1) - Level Link/Warp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-baddyprops-2-baddy-properties">PLO_BADDYPROPS (2) - Baddy Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-npcprops-3-npc-properties">PLO_NPCPROPS (3) - NPC Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-levelchest-4-level-chest">PLO_LEVELCHEST (4) - Level Chest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-levelsign-5-level-sign">PLO_LEVELSIGN (5) - Level Sign</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-levelname-6-level-name">PLO_LEVELNAME (6) - Level Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-boardmodify-7-board-modification">PLO_BOARDMODIFY (7) - Board Modification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-otherplprops-8-other-player-properties">PLO_OTHERPLPROPS (8) - Other Player Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-playerprops-9-own-player-properties">PLO_PLAYERPROPS (9) - Own Player Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-isleader-10-level-leader-status">PLO_ISLEADER (10) - Level Leader Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-bombadd-11-bomb-added">PLO_BOMBADD (11) - Bomb Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-bombdel-12-bomb-removed">PLO_BOMBDEL (12) - Bomb Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-toall-13-chat-message">PLO_TOALL (13) - Chat Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-playerwarp-14-player-warp">PLO_PLAYERWARP (14) - Player Warp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-warpfailed-15-warp-failed">PLO_WARPFAILED (15) - Warp Failed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-discmessage-16-disconnect-message">PLO_DISCMESSAGE (16) - Disconnect Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-horseadd-17-horse-added">PLO_HORSEADD (17) - Horse Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-horsedel-18-horse-removed">PLO_HORSEDEL (18) - Horse Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-arrowadd-19-arrow-added">PLO_ARROWADD (19) - Arrow Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-firespy-20-fire-spy">PLO_FIRESPY (20) - Fire Spy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-throwcarried-21-throw-carried-object">PLO_THROWCARRIED (21) - Throw Carried Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-itemadd-22-item-added">PLO_ITEMADD (22) - Item Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-itemdel-23-item-removed">PLO_ITEMDEL (23) - Item Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-npcmoved-24-npc-moved">PLO_NPCMOVED (24) - NPC Moved</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-signature-25-player-signature">PLO_SIGNATURE (25) - Player Signature</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-npcaction-26-npc-action">PLO_NPCACTION (26) - NPC Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-baddyhurt-27-baddy-hurt">PLO_BADDYHURT (27) - Baddy Hurt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-flagset-28-flag-set">PLO_FLAGSET (28) - Flag Set</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-npcdel-29-npc-deleted">PLO_NPCDEL (29) - NPC Deleted</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-filesendfailed-30-file-send-failed">PLO_FILESENDFAILED (30) - File Send Failed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-flagdel-31-flag-deleted">PLO_FLAGDEL (31) - Flag Deleted</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-showimg-32-show-image">PLO_SHOWIMG (32) - Show Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-npcweaponadd-33-npc-weapon-added">PLO_NPCWEAPONADD (33) - NPC Weapon Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-npcweapondel-34-npc-weapon-deleted">PLO_NPCWEAPONDEL (34) - NPC Weapon Deleted</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-rc-adminmessage-35-admin-message">PLO_RC_ADMINMESSAGE (35) - Admin Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-explosion-36-explosion">PLO_EXPLOSION (36) - Explosion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-privatemessage-37-private-message">PLO_PRIVATEMESSAGE (37) - Private Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-pushaway-38-push-away">PLO_PUSHAWAY (38) - Push Away</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-levelmodtime-39-level-modification-time">PLO_LEVELMODTIME (39) - Level Modification Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-hurtplayer-40-hurt-player">PLO_HURTPLAYER (40) - Hurt Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-newworldtime-42-new-world-time">PLO_NEWWORLDTIME (42) - New World Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-defaultweapon-43-default-weapon">PLO_DEFAULTWEAPON (43) - Default Weapon</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-hasnpcserver-44-has-npc-server">PLO_HASNPCSERVER (44) - Has NPC Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-fileuptodate-45-file-up-to-date">PLO_FILEUPTODATE (45) - File Up To Date</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-hitobjects-46-hit-objects">PLO_HITOBJECTS (46) - Hit Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-staffguilds-47-staff-guilds">PLO_STAFFGUILDS (47) - Staff Guilds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-triggeraction-48-trigger-action">PLO_TRIGGERACTION (48) - Trigger Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-playerwarp2-49-player-warp-v2">PLO_PLAYERWARP2 (49) - Player Warp v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-addplayer-55-add-player-legacy">PLO_ADDPLAYER (55) - Add Player (Legacy)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-delplayer-56-delete-player-legacy">PLO_DELPLAYER (56) - Delete Player (Legacy)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-largefilestart-68-large-file-start">PLO_LARGEFILESTART (68) - Large File Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-largefileend-69-large-file-end">PLO_LARGEFILEEND (69) - Large File End</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-rc-chat-74-rc-chat">PLO_RC_CHAT (74) - RC Chat</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-profile-75-player-profile">PLO_PROFILE (75) - Player Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-servertext-82-server-text-response">PLO_SERVERTEXT (82) - Server Text Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-largefilesize-84-large-file-size">PLO_LARGEFILESIZE (84) - Large File Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-rawdata-100-raw-data">PLO_RAWDATA (100) - Raw Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-boardpacket-101-board-packet">PLO_BOARDPACKET (101) - Board Packet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-file-102-file-data">PLO_FILE (102) - File Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-updatepackagesize-105-update-package-size">PLO_UPDATEPACKAGESIZE (105) - Update Package Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-updatepackagedone-106-update-package-done">PLO_UPDATEPACKAGEDONE (106) - Update Package Done</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-boardlayer-107-board-layer">PLO_BOARDLAYER (107) - Board Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-npcbytecode-131-npc-bytecode">PLO_NPCBYTECODE (131) - NPC Bytecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-ganiscript-134-gani-script">PLO_GANISCRIPT (134) - GANI Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-npcweaponscript-140-npc-weapon-script">PLO_NPCWEAPONSCRIPT (140) - NPC Weapon Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-npcdel2-150-npc-delete-v2">PLO_NPCDEL2 (150) - NPC Delete v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-hidenpcs-151-hide-npcs">PLO_HIDENPCS (151) - Hide NPCs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-say2-153-say-sign-text">PLO_SAY2 (153) - Say/Sign Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-freezeplayer2-154-freeze-player">PLO_FREEZEPLAYER2 (154) - Freeze Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-unfreezeplayer-155-unfreeze-player">PLO_UNFREEZEPLAYER (155) - Unfreeze Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-setactivelevel-156-set-active-level">PLO_SETACTIVELEVEL (156) - Set Active Level</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-move-165-move-command">PLO_MOVE (165) - Move Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-ghostmode-170-ghost-mode">PLO_GHOSTMODE (170) - Ghost Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-minimap-172-minimap-data">PLO_MINIMAP (172) - Minimap Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-ghosttext-173-ghost-text">PLO_GHOSTTEXT (173) - Ghost Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-ghosticon-174-ghost-icon">PLO_GHOSTICON (174) - Ghost Icon</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-shoot-175-shoot-projectile-server">PLO_SHOOT (175) - Shoot Projectile (Server)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-fullstop-176-full-stop">PLO_FULLSTOP (176) - Full Stop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-serverwarp-178-server-warp">PLO_SERVERWARP (178) - Server Warp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-rpgwindow-179-rpg-window">PLO_RPGWINDOW (179) - RPG Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-statuslist-180-status-list">PLO_STATUSLIST (180) - Status List</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-listprocesses-182-list-processes">PLO_LISTPROCESSES (182) - List Processes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-updatepackageisupdated-187-package-updated">PLO_UPDATEPACKAGEISUPDATED (187) - Package Updated</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-move2-189-move-v2">PLO_MOVE2 (189) - Move v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-shoot2-191-shoot-v2">PLO_SHOOT2 (191) - Shoot v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-clearweapons-194-clear-weapons">PLO_CLEARWEAPONS (194) - Clear Weapons</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plo-loadgani-253-load-gani">PLO_LOADGANI (253) - Load GANI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#encryption-implementation-details">Encryption Implementation Details</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#encrypt-gen-5-key-stream-generation">ENCRYPT_GEN_5 Key Stream Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compression-integration">Compression Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packet-bundle-processing">Packet Bundle Processing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Encryption Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-types.html">Data Types Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation/pyreborn-analysis.html">PyReborn Protocol Conformance Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation/conformance.html">Protocol Conformance Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/usage.html">Usage Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Reborn Protocol Reference</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Reborn Protocol v2 - Packet Structure Reference</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/hosler/opengraal2/blob/main/graal-protocol-docs/docs/protocol/packet-structures.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="reborn-protocol-v2-packet-structure-reference">
<h1>Reborn Protocol v2 - Packet Structure Reference<a class="headerlink" href="#reborn-protocol-v2-packet-structure-reference" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This document provides comprehensive documentation of the Reborn protocol packet structures based on analysis of the GServer-v2 codebase. All packet structures are documented down to the primitive level for cross-language implementation.</p>
</section>
<section id="protocol-architecture">
<h2>Protocol Architecture<a class="headerlink" href="#protocol-architecture" title="Link to this heading"></a></h2>
<section id="packet-bundle-structure">
<h3>Packet Bundle Structure<a class="headerlink" href="#packet-bundle-structure" title="Link to this heading"></a></h3>
<p>All packets are sent within bundles with the following structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">UINT16</span><span class="p">:</span> <span class="n">packet_size</span><span class="p">][</span><span class="n">PACKET_BUNDLE_DATA</span><span class="p">]</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UINT16</span> <span class="pre">packet_size</span></code>: Size of the bundle data in bytes (little-endian)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PACKET_BUNDLE_DATA</span></code>: Encrypted/compressed packet bundle</p></li>
</ul>
</section>
<section id="bundle-processing-gen-5-protocol">
<h3>Bundle Processing (GEN_5 Protocol)<a class="headerlink" href="#bundle-processing-gen-5-protocol" title="Link to this heading"></a></h3>
<p>For ENCRYPT_GEN_5 protocol (recommended):</p>
<ol class="arabic simple">
<li><p><strong>Bundle Structure</strong>: <code class="docutils literal notranslate"><span class="pre">[UINT8:</span> <span class="pre">compression_type][ENCRYPTED_COMPRESSED_DATA]</span></code></p></li>
<li><p><strong>Compression Types</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0x02</span></code>: COMPRESS_UNCOMPRESSED (no compression)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0x04</span></code>: COMPRESS_ZLIB (zlib compression)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0x06</span></code>: COMPRESS_BZ2 (bzip2 compression)</p></li>
</ul>
</li>
<li><p><strong>Processing Order</strong>:</p>
<ul class="simple">
<li><p>Client → Server: Compress data → Encrypt → Send</p></li>
<li><p>Server → Client: Receive → Decrypt → Decompress</p></li>
</ul>
</li>
<li><p><strong>Encryption</strong>: Partial packet encryption using XOR-based stream cipher</p>
<ul class="simple">
<li><p>Uses iterator-based key generation</p></li>
<li><p>Encryption limit depends on compression type</p></li>
</ul>
</li>
</ol>
</section>
<section id="individual-packet-structure">
<h3>Individual Packet Structure<a class="headerlink" href="#individual-packet-structure" title="Link to this heading"></a></h3>
<p>Within each bundle, packets are separated by newlines (<code class="docutils literal notranslate"><span class="pre">\n</span></code>) except for raw data packets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">UINT8</span><span class="p">:</span> <span class="n">packet_id</span><span class="p">][</span><span class="n">PACKET_DATA</span><span class="p">]</span>\<span class="n">n</span>
</pre></div>
</div>
<p>Special case for raw data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">UINT8</span><span class="p">:</span> <span class="n">PLI_RAWDATA</span><span class="p">][</span><span class="n">UINT32</span><span class="p">:</span> <span class="n">data_length</span><span class="p">]</span>
<span class="p">[</span><span class="n">RAW_DATA_BYTES</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="data-encoding-types">
<h2>Data Encoding Types<a class="headerlink" href="#data-encoding-types" title="Link to this heading"></a></h2>
<section id="reborn-specific-encoding-g-types">
<h3>Reborn-Specific Encoding (G-Types)<a class="headerlink" href="#reborn-specific-encoding-g-types" title="Link to this heading"></a></h3>
<p>The protocol uses specialized encoding for efficient data transmission:</p>
<ul class="simple">
<li><p><strong>GCHAR</strong>: <code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">+</span> <span class="pre">32</span></code> (ensures printable ASCII)</p></li>
<li><p><strong>GUCHAR</strong>: <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">char</span> <span class="pre">+</span> <span class="pre">32</span></code></p></li>
<li><p><strong>GSHORT</strong>: <code class="docutils literal notranslate"><span class="pre">((value</span> <span class="pre">&gt;&gt;</span> <span class="pre">6)</span> <span class="pre">+</span> <span class="pre">32)</span> <span class="pre">+</span> <span class="pre">((value</span> <span class="pre">&amp;</span> <span class="pre">0x3f)</span> <span class="pre">+</span> <span class="pre">32)</span></code> (2 bytes)</p></li>
<li><p><strong>GUSHORT</strong>: Same as GSHORT but for unsigned values</p></li>
<li><p><strong>GINT</strong>: 3-byte encoding</p></li>
<li><p><strong>GINT4</strong>: 4-byte encoding</p></li>
<li><p><strong>GINT5/GUINT5</strong>: 5-byte encoding for timestamps/large values</p></li>
</ul>
</section>
<section id="string-encoding">
<h3>String Encoding<a class="headerlink" href="#string-encoding" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>GSTRING</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">length][string_data]</span></code> - String with Graal-encoded length prefix</p></li>
<li><p><strong>Regular String</strong>: Null-terminated or delimiter-terminated string</p></li>
</ul>
</section>
</section>
<section id="client-to-server-packets-pli">
<h2>Client-to-Server Packets (PLI_*)<a class="headerlink" href="#client-to-server-packets-pli" title="Link to this heading"></a></h2>
<section id="pli-levelwarp-0-level-warp-request">
<h3>PLI_LEVELWARP (0) - Level Warp Request<a class="headerlink" href="#pli-levelwarp-0-level-warp-request" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player moves to a different level</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">coordinate</span> <span class="p">(</span><span class="ow">in</span> <span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">coordinate</span> <span class="p">(</span><span class="ow">in</span> <span class="n">tiles</span><span class="p">)</span>  
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">level_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Target</span> <span class="n">level</span> <span class="n">name</span>
</pre></div>
</div>
<p><strong>Variant</strong>: PLI_LEVELWARPMOD (30) - includes modification time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">mod_time</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Level</span> <span class="n">modification</span> <span class="n">timestamp</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">level_name</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="pli-boardmodify-1-tile-modification">
<h3>PLI_BOARDMODIFY (1) - Tile Modification<a class="headerlink" href="#pli-boardmodify-1-tile-modification" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player destroys/places tiles (e.g., cutting bushes)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">start_x</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Starting</span> <span class="n">X</span> <span class="n">coordinate</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">63</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">start_y</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Starting</span> <span class="n">Y</span> <span class="n">coordinate</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">63</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">width</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Width</span> <span class="n">of</span> <span class="n">modification</span> <span class="n">area</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">height</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Height</span> <span class="n">of</span> <span class="n">modification</span> <span class="n">area</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">tile_data</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Raw</span> <span class="n">tile</span> <span class="n">data</span> <span class="p">(</span><span class="mi">2</span> <span class="nb">bytes</span> <span class="n">per</span> <span class="n">tile</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-playerprops-2-player-property-update">
<h3>PLI_PLAYERPROPS (2) - Player Property Update<a class="headerlink" href="#pli-playerprops-2-player-property-update" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player properties change (movement, appearance, stats, etc.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">PROPERTY_DATA</span><span class="o">...</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Variable</span><span class="o">-</span><span class="n">length</span> <span class="nb">property</span> <span class="n">data</span>
</pre></div>
</div>
<p>Property format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">prop_id</span><span class="p">][</span><span class="n">PROP_SPECIFIC_DATA</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="pli-npcprops-3-npc-property-update">
<h3>PLI_NPCPROPS (3) - NPC Property Update<a class="headerlink" href="#pli-npcprops-3-npc-property-update" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client updates NPC properties (when no NPC-Server)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">prop_data</span><span class="p">]</span>  <span class="o">//</span> <span class="n">NPC</span> <span class="nb">property</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-bombadd-4-place-bomb">
<h3>PLI_BOMBADD (4) - Place Bomb<a class="headerlink" href="#pli-bombadd-4-place-bomb" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player places a bomb</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>           <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>           <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">player_power</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Player</span> <span class="n">ID</span> <span class="p">(</span><span class="n">upper</span> <span class="mi">6</span> <span class="n">bits</span><span class="p">)</span> <span class="o">+</span> <span class="n">Power</span> <span class="p">(</span><span class="n">lower</span> <span class="mi">2</span> <span class="n">bits</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">time_to_explode</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Timer</span> <span class="ow">in</span> <span class="mf">0.05</span><span class="n">s</span> <span class="n">increments</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mi">55</span> <span class="o">=</span> <span class="mi">3</span> <span class="n">seconds</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-bombdel-5-remove-bomb">
<h3>PLI_BOMBDEL (5) - Remove Bomb<a class="headerlink" href="#pli-bombdel-5-remove-bomb" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Bomb explodes or is removed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-toall-6-chat-message">
<h3>PLI_TOALL (6) - Chat Message<a class="headerlink" href="#pli-toall-6-chat-message" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player sends public chat</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">message</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Chat</span> <span class="n">message</span> <span class="n">text</span>
</pre></div>
</div>
</section>
<section id="pli-horseadd-7-add-horse">
<h3>PLI_HORSEADD (7) - Add Horse<a class="headerlink" href="#pli-horseadd-7-add-horse" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player places/spawns a horse</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">dir_bush</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Direction</span> <span class="p">(</span><span class="mi">2</span> <span class="n">bits</span><span class="p">)</span> <span class="o">+</span> <span class="n">Bush</span> <span class="n">count</span> <span class="p">(</span><span class="mi">6</span> <span class="n">bits</span><span class="p">)</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">image</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Horse</span> <span class="n">image</span> <span class="n">filename</span>
</pre></div>
</div>
</section>
<section id="pli-horsedel-8-remove-horse">
<h3>PLI_HORSEDEL (8) - Remove Horse<a class="headerlink" href="#pli-horsedel-8-remove-horse" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Horse is removed/destroyed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-arrowadd-9-shoot-arrow">
<h3>PLI_ARROWADD (9) - Shoot Arrow<a class="headerlink" href="#pli-arrowadd-9-shoot-arrow" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player fires an arrow</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">flags</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Direction</span> <span class="p">(</span><span class="mi">2</span> <span class="n">bits</span><span class="p">)</span> <span class="o">+</span> <span class="n">Reflect</span> <span class="p">(</span><span class="mi">1</span> <span class="n">bit</span><span class="p">)</span> <span class="o">+</span> <span class="n">From</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">bit</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">sprite</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Arrow</span> <span class="n">sprite</span><span class="o">/</span><span class="nb">type</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">power</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Arrow</span> <span class="n">power</span><span class="o">/</span><span class="n">damage</span>
</pre></div>
</div>
</section>
<section id="pli-firespy-10-fire-spy">
<h3>PLI_FIRESPY (10) - Fire Spy<a class="headerlink" href="#pli-firespy-10-fire-spy" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player uses fire spy weapon</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">length_power</span><span class="p">]</span> <span class="o">//</span> <span class="n">Length</span> <span class="p">(</span><span class="mi">5</span> <span class="n">bits</span><span class="p">)</span> <span class="o">+</span> <span class="n">Power</span> <span class="p">(</span><span class="mi">3</span> <span class="n">bits</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-throwcarried-11-throw-carried-object">
<h3>PLI_THROWCARRIED (11) - Throw Carried Object<a class="headerlink" href="#pli-throwcarried-11-throw-carried-object" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player throws carried item/NPC</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-itemadd-12-drop-item">
<h3>PLI_ITEMADD (12) - Drop Item<a class="headerlink" href="#pli-itemadd-12-drop-item" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player drops an item</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">item_type</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Item</span> <span class="nb">type</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">5</span><span class="p">:</span> <span class="n">various</span> <span class="n">items</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-itemdel-13-remove-item">
<h3>PLI_ITEMDEL (13) - Remove Item<a class="headerlink" href="#pli-itemdel-13-remove-item" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Item is destroyed (not picked up)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-itemtake-32-pick-up-item">
<h3>PLI_ITEMTAKE (32) - Pick Up Item<a class="headerlink" href="#pli-itemtake-32-pick-up-item" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player picks up an item</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-claimpker-14-claim-player-kill">
<h3>PLI_CLAIMPKER (14) - Claim Player Kill<a class="headerlink" href="#pli-claimpker-14-claim-player-kill" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player dies and killer claims the kill</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">killer_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">ID</span> <span class="n">of</span> <span class="n">the</span> <span class="n">killer</span>
</pre></div>
</div>
</section>
<section id="pli-baddyprops-15-baddy-property-update">
<h3>PLI_BADDYPROPS (15) - Baddy Property Update<a class="headerlink" href="#pli-baddyprops-15-baddy-property-update" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client updates baddy properties (level leader only)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">baddy_id</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Baddy</span> <span class="n">identifier</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">255</span><span class="p">)</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">prop_data</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Baddy</span> <span class="nb">property</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-baddyhurt-16-hurt-baddy">
<h3>PLI_BADDYHURT (16) - Hurt Baddy<a class="headerlink" href="#pli-baddyhurt-16-hurt-baddy" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Baddy takes damage</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">baddy_id</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Baddy</span> <span class="n">identifier</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">damage</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Damage</span> <span class="n">amount</span>
</pre></div>
</div>
</section>
<section id="pli-baddyadd-17-add-baddy">
<h3>PLI_BADDYADD (17) - Add Baddy<a class="headerlink" href="#pli-baddyadd-17-add-baddy" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player spawns a baddy</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">baddy_type</span><span class="p">]</span> <span class="o">//</span> <span class="n">Baddy</span> <span class="nb">type</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">power</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Baddy</span> <span class="n">power</span><span class="o">/</span><span class="n">health</span> <span class="p">(</span><span class="n">capped</span> <span class="n">at</span> <span class="mi">12</span><span class="p">)</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">image</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Baddy</span> <span class="n">image</span> <span class="n">filename</span>
</pre></div>
</div>
</section>
<section id="pli-flagset-18-set-flag-variable">
<h3>PLI_FLAGSET (18) - Set Flag/Variable<a class="headerlink" href="#pli-flagset-18-set-flag-variable" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player/script sets a client or server flag</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">flag_data</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Format</span><span class="p">:</span> <span class="s2">&quot;flag_name=value&quot;</span> <span class="ow">or</span> <span class="s2">&quot;flag_name&quot;</span>
</pre></div>
</div>
</section>
<section id="pli-flagdel-19-delete-flag-variable">
<h3>PLI_FLAGDEL (19) - Delete Flag/Variable<a class="headerlink" href="#pli-flagdel-19-delete-flag-variable" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player/script deletes a flag</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">flag_name</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Flag</span> <span class="n">name</span> <span class="n">to</span> <span class="n">delete</span>
</pre></div>
</div>
</section>
<section id="pli-openchest-20-open-chest">
<h3>PLI_OPENCHEST (20) - Open Chest<a class="headerlink" href="#pli-openchest-20-open-chest" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player opens a treasure chest</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">X</span> <span class="n">coordinate</span> <span class="ow">in</span> <span class="n">tiles</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Y</span> <span class="n">coordinate</span> <span class="ow">in</span> <span class="n">tiles</span>
</pre></div>
</div>
</section>
<section id="pli-putnpc-21-place-npc">
<h3>PLI_PUTNPC (21) - Place NPC<a class="headerlink" href="#pli-putnpc-21-place-npc" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player places an NPC (when putnpc enabled)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">image_len</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Length</span> <span class="n">of</span> <span class="n">image</span> <span class="n">string</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">image</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">image</span> <span class="n">filename</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">code_len</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Length</span> <span class="n">of</span> <span class="n">code</span> <span class="n">string</span>  
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">code_file</span><span class="p">]</span>  <span class="o">//</span> <span class="n">NPC</span> <span class="n">script</span> <span class="n">filename</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-npcdel-22-delete-npc">
<h3>PLI_NPCDEL (22) - Delete NPC<a class="headerlink" href="#pli-npcdel-22-delete-npc" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player deletes an NPC</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span> <span class="n">to</span> <span class="n">delete</span>
</pre></div>
</div>
</section>
<section id="pli-wantfile-23-request-file">
<h3>PLI_WANTFILE (23) - Request File<a class="headerlink" href="#pli-wantfile-23-request-file" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client needs a file (image, level, etc.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">filename</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Requested</span> <span class="n">file</span> <span class="n">path</span>
</pre></div>
</div>
</section>
<section id="pli-showimg-24-show-image">
<h3>PLI_SHOWIMG (24) - Show Image<a class="headerlink" href="#pli-showimg-24-show-image" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player displays an image to others</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">IMAGE_DATA</span><span class="o">...</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Image</span> <span class="n">display</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-hurtplayer-26-hurt-player">
<h3>PLI_HURTPLAYER (26) - Hurt Player<a class="headerlink" href="#pli-hurtplayer-26-hurt-player" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player damages another player</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">victim_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Target</span> <span class="n">player</span> <span class="n">ID</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">hurt_dx</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Knockback</span> <span class="n">X</span> <span class="n">direction</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">hurt_dy</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Knockback</span> <span class="n">Y</span> <span class="n">direction</span>  
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">power</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Damage</span> <span class="n">amount</span>
<span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">ID</span> <span class="p">(</span><span class="k">if</span> <span class="n">NPC</span> <span class="n">caused</span> <span class="n">damage</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-explosion-27-create-explosion">
<h3>PLI_EXPLOSION (27) - Create Explosion<a class="headerlink" href="#pli-explosion-27-create-explosion" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player creates an explosion effect</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">radius</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Explosion</span> <span class="n">radius</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">power</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Explosion</span> <span class="n">power</span>
</pre></div>
</div>
</section>
<section id="pli-privatemessage-28-private-message">
<h3>PLI_PRIVATEMESSAGE (28) - Private Message<a class="headerlink" href="#pli-privatemessage-28-private-message" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player sends PM to other players</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_count</span><span class="p">]</span>        <span class="o">//</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">recipients</span>
<span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span><span class="o">...</span>        <span class="o">//</span> <span class="n">Player</span> <span class="n">IDs</span> <span class="p">(</span><span class="n">repeated</span> <span class="n">player_count</span> <span class="n">times</span><span class="p">)</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">message</span><span class="p">]</span>              <span class="o">//</span> <span class="n">Message</span> <span class="n">text</span>
</pre></div>
</div>
</section>
<section id="pli-npcweapondel-29-delete-npc-weapon">
<h3>PLI_NPCWEAPONDEL (29) - Delete NPC Weapon<a class="headerlink" href="#pli-npcweapondel-29-delete-npc-weapon" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player removes weapon from inventory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">weapon_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Weapon</span> <span class="n">name</span> <span class="n">to</span> <span class="n">remove</span>
</pre></div>
</div>
</section>
<section id="pli-weaponadd-33-add-weapon">
<h3>PLI_WEAPONADD (33) - Add Weapon<a class="headerlink" href="#pli-weaponadd-33-add-weapon" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player gains a weapon</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">weapon_type</span><span class="p">]</span> <span class="o">//</span> <span class="mi">0</span> <span class="o">=</span> <span class="n">default</span> <span class="n">weapon</span><span class="p">,</span> <span class="o">&gt;</span><span class="mi">0</span> <span class="o">=</span> <span class="n">NPC</span> <span class="n">weapon</span>
<span class="o">//</span> <span class="n">If</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">item_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Default</span> <span class="n">weapon</span> <span class="n">item</span> <span class="n">ID</span>
<span class="o">//</span> <span class="n">If</span> <span class="nb">type</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Source</span> <span class="n">NPC</span> <span class="n">ID</span>
</pre></div>
</div>
</section>
<section id="pli-updatefile-34-file-update-check">
<h3>PLI_UPDATEFILE (34) - File Update Check<a class="headerlink" href="#pli-updatefile-34-file-update-check" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client checks if local file is current</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">mod_time</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Local</span> <span class="n">file</span> <span class="n">modification</span> <span class="n">time</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">filename</span><span class="p">]</span>   <span class="o">//</span> <span class="n">File</span> <span class="n">to</span> <span class="n">check</span>
</pre></div>
</div>
</section>
<section id="pli-adjacentlevel-35-request-adjacent-level">
<h3>PLI_ADJACENTLEVEL (35) - Request Adjacent Level<a class="headerlink" href="#pli-adjacentlevel-35-request-adjacent-level" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client requests neighboring level data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">mod_time</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Level</span> <span class="n">modification</span> <span class="n">time</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">level_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Adjacent</span> <span class="n">level</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="pli-hitobjects-36-hit-objects">
<h3>PLI_HITOBJECTS (36) - Hit Objects<a class="headerlink" href="#pli-hitobjects-36-hit-objects" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player’s weapon hits objects/NPCs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">power</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Hit</span> <span class="n">power</span><span class="o">/</span><span class="n">damage</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">increments</span><span class="p">)</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">ID</span> <span class="p">(</span><span class="n">optional</span><span class="p">,</span> <span class="k">if</span> <span class="n">hit</span> <span class="n">came</span> <span class="kn">from</span><span class="w"> </span><span class="nn">NPC</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-language-37-set-language">
<h3>PLI_LANGUAGE (37) - Set Language<a class="headerlink" href="#pli-language-37-set-language" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player changes language setting</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">language</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Language</span> <span class="n">code</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span> <span class="s2">&quot;English&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-triggeraction-38-trigger-action">
<h3>PLI_TRIGGERACTION (38) - Trigger Action<a class="headerlink" href="#pli-triggeraction-38-trigger-action" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player activates a trigger/sign action</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Associated</span> <span class="n">NPC</span> <span class="n">ID</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="ow">in</span> <span class="n">half</span><span class="o">-</span><span class="n">tiles</span><span class="p">)</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">action_data</span><span class="p">]</span> <span class="o">//</span> <span class="n">Comma</span><span class="o">-</span><span class="n">separated</span> <span class="n">action</span> <span class="n">parameters</span>
</pre></div>
</div>
</section>
<section id="pli-mapinfo-39-map-information">
<h3>PLI_MAPINFO (39) - Map Information<a class="headerlink" href="#pli-mapinfo-39-map-information" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client requests map information</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">data</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Map</span><span class="o">-</span><span class="n">related</span> <span class="n">data</span> <span class="p">(</span><span class="n">usage</span> <span class="n">unclear</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-shoot-40-shoot-projectile-v1">
<h3>PLI_SHOOT (40) - Shoot Projectile (v1)<a class="headerlink" href="#pli-shoot-40-shoot-projectile-v1" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player fires a projectile</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GINT</span><span class="p">:</span> <span class="n">unknown</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Unknown</span> <span class="n">parameter</span> <span class="p">(</span><span class="n">always</span> <span class="mi">0</span> <span class="ow">in</span> <span class="n">tests</span><span class="p">)</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">pixel_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">pixels</span><span class="o">/</span><span class="mi">16</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">pixel_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">pixels</span><span class="o">/</span><span class="mi">16</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">pixel_z</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Z</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">pixels</span><span class="o">/</span><span class="mi">16</span> <span class="o">+</span> <span class="mi">50</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">angle</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Horizontal</span> <span class="n">angle</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">220</span> <span class="n">maps</span> <span class="n">to</span> <span class="mi">0</span><span class="o">-</span><span class="n">π</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">z_angle</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Z</span> <span class="n">angle</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">220</span> <span class="n">maps</span> <span class="n">to</span> <span class="mi">0</span><span class="o">-</span><span class="n">π</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">speed</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Speed</span> <span class="ow">in</span> <span class="n">pixels</span> <span class="n">per</span> <span class="mf">0.05</span><span class="n">s</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">gani_len</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Length</span> <span class="n">of</span> <span class="n">GANI</span> <span class="n">string</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">gani</span><span class="p">]</span>       <span class="o">//</span> <span class="n">GANI</span> <span class="n">animation</span> <span class="n">name</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">param_len</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Length</span> <span class="n">of</span> <span class="n">shoot</span> <span class="n">parameters</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">shoot_params</span><span class="p">]</span> <span class="o">//</span> <span class="n">Shoot</span> <span class="n">parameters</span>
</pre></div>
</div>
</section>
<section id="pli-shoot2-48-shoot-projectile-v2">
<h3>PLI_SHOOT2 (48) - Shoot Projectile (v2)<a class="headerlink" href="#pli-shoot2-48-shoot-projectile-v2" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player fires a projectile (v5.07+ clients)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">pixel_x</span><span class="p">]</span>   <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">pixels</span>
<span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">pixel_y</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">pixels</span>
<span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">pixel_z</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Z</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">pixels</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">offset_x</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Level</span> <span class="n">offset</span> <span class="n">X</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">offset_y</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Level</span> <span class="n">offset</span> <span class="n">Y</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">angle</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Horizontal</span> <span class="n">angle</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">220</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">z_angle</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Z</span> <span class="n">angle</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">220</span><span class="p">)</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">speed</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Speed</span> <span class="ow">in</span> <span class="n">pixels</span> <span class="n">per</span> <span class="mf">0.05</span><span class="n">s</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">gravity</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Gravity</span> <span class="n">factor</span>
<span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">gani_len</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Length</span> <span class="n">of</span> <span class="n">GANI</span> <span class="n">string</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">gani</span><span class="p">]</span>       <span class="o">//</span> <span class="n">GANI</span> <span class="n">animation</span> <span class="n">name</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">param_len</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Length</span> <span class="n">of</span> <span class="n">shoot</span> <span class="n">parameters</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">shoot_params</span><span class="p">]</span> <span class="o">//</span> <span class="n">Shoot</span> <span class="n">parameters</span>
</pre></div>
</div>
</section>
<section id="pli-serverwarp-41-server-warp-request">
<h3>PLI_SERVERWARP (41) - Server Warp Request<a class="headerlink" href="#pli-serverwarp-41-server-warp-request" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player requests to warp to another server</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">server_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Target</span> <span class="n">server</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="pli-muteplayer-43-mute-player">
<h3>PLI_MUTEPLAYER (43) - Mute Player<a class="headerlink" href="#pli-muteplayer-43-mute-player" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player mutes another player (via playerlist)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Target</span> <span class="n">player</span> <span class="n">ID</span>
<span class="p">[</span><span class="n">GBYTE</span><span class="p">:</span> <span class="n">mute_state</span><span class="p">]</span>  <span class="o">//</span> <span class="mi">1</span> <span class="o">=</span> <span class="n">mute</span><span class="p">,</span> <span class="mi">0</span> <span class="o">=</span> <span class="n">unmute</span>
</pre></div>
</div>
</section>
<section id="pli-processlist-44-process-list">
<h3>PLI_PROCESSLIST (44) - Process List<a class="headerlink" href="#pli-processlist-44-process-list" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Server requests client’s running processes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">process_data</span><span class="p">]</span> <span class="o">//</span> <span class="n">Newline</span><span class="o">-</span><span class="n">separated</span> <span class="n">process</span> <span class="nb">list</span>
</pre></div>
</div>
</section>
<section id="pli-verifywantsend-47-verify-file-checksum">
<h3>PLI_VERIFYWANTSEND (47) - Verify File Checksum<a class="headerlink" href="#pli-verifywantsend-47-verify-file-checksum" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client verifies file integrity before requesting</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">checksum</span><span class="p">]</span>   <span class="o">//</span> <span class="n">CRC32</span> <span class="n">checksum</span> <span class="n">of</span> <span class="n">local</span> <span class="n">file</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">filename</span><span class="p">]</span>   <span class="o">//</span> <span class="n">File</span> <span class="n">to</span> <span class="n">verify</span>
</pre></div>
</div>
</section>
<section id="pli-rawdata-50-raw-data-marker">
<h3>PLI_RAWDATA (50) - Raw Data Marker<a class="headerlink" href="#pli-rawdata-50-raw-data-marker" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Indicates next packet contains raw binary data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">data_size</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Size</span> <span class="n">of</span> <span class="n">following</span> <span class="n">raw</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">bytes</span>
</pre></div>
</div>
</section>
</section>
<section id="player-properties-pli-playerprops-data">
<h2>Player Properties (PLI_PLAYERPROPS Data)<a class="headerlink" href="#player-properties-pli-playerprops-data" title="Link to this heading"></a></h2>
<p>Player properties use the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">prop_id</span><span class="p">][</span><span class="n">PROP_DATA</span><span class="p">]</span>
</pre></div>
</div>
<section id="property-encodings-by-type">
<h3>Property Encodings by Type:<a class="headerlink" href="#property-encodings-by-type" title="Link to this heading"></a></h3>
<p><strong>NICKNAME (0)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">length][string]</span></code>
<strong>MAXPOWER (1)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">hearts</span> <span class="pre">*</span> <span class="pre">2]</span></code> (1 heart = 2 power)
<strong>CURPOWER (2)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">current_power]</span></code>
<strong>RUPEESCOUNT (3)</strong>: <code class="docutils literal notranslate"><span class="pre">[GUINT:</span> <span class="pre">rupee_count]</span></code>
<strong>ARROWSCOUNT (4)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">arrow_count]</span></code>
<strong>BOMBSCOUNT (5)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">bomb_count]</span></code>
<strong>GLOVEPOWER (6)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">glove_power]</span></code> (0-3)
<strong>BOMBPOWER (7)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">bomb_power]</span></code> (0-3)
<strong>SWORDPOWER (8)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">sword_power]</span></code> (0-4)
<strong>SHIELDPOWER (9)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">shield_power]</span></code> (0-3)
<strong>GANI (10)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">length][string]</span></code> - Animation file
<strong>HEADGIF (11)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">length][string]</span></code> - Head image
<strong>CURCHAT (12)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">length][string]</span></code> - Current chat bubble
<strong>COLORS (13)</strong>: <code class="docutils literal notranslate"><span class="pre">[5</span> <span class="pre">bytes:</span> <span class="pre">color_data]</span></code> - Player colors
<strong>ID (14)</strong>: <code class="docutils literal notranslate"><span class="pre">[GUSHORT:</span> <span class="pre">player_id]</span></code>
<strong>X (15)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">pixel_x</span> <span class="pre">/</span> <span class="pre">2]</span></code> - X position
<strong>Y (16)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">pixel_y</span> <span class="pre">/</span> <span class="pre">2]</span></code> - Y position
<strong>SPRITE (17)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">sprite_index]</span></code> - Current animation frame
<strong>STATUS (18)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">status_flags]</span></code> - Player status bits
<strong>CARRYSPRITE (19)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">carry_sprite]</span></code> - Carried object sprite
<strong>CURLEVEL (20)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">length][string]</span></code> - Current level name
<strong>HORSEGIF (21)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">length][string]</span></code> - Horse image
<strong>HORSEBUSHES (22)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">bush_count]</span></code> - Bushes eaten by horse
<strong>EFFECTCOLORS (23)</strong>: <code class="docutils literal notranslate"><span class="pre">[4</span> <span class="pre">bytes:</span> <span class="pre">effect_colors]</span></code> - Visual effect colors
<strong>CARRYNPC (24)</strong>: <code class="docutils literal notranslate"><span class="pre">[GUINT:</span> <span class="pre">npc_id]</span></code> - Carried NPC ID
<strong>APCOUNTER (25)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">ap_time]</span></code> - AP recovery counter
<strong>MAGICPOINTS (26)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">mp_count]</span></code> - Magic points
<strong>KILLSCOUNT (27)</strong>: <code class="docutils literal notranslate"><span class="pre">[GUINT:</span> <span class="pre">kill_count]</span></code> - Player kills
<strong>DEATHSCOUNT (28)</strong>: <code class="docutils literal notranslate"><span class="pre">[GUINT:</span> <span class="pre">death_count]</span></code> - Player deaths
<strong>ONLINESECS (29)</strong>: <code class="docutils literal notranslate"><span class="pre">[GUINT:</span> <span class="pre">online_time]</span></code> - Online time in seconds
<strong>IPADDR (30)</strong>: <code class="docutils literal notranslate"><span class="pre">[5</span> <span class="pre">bytes:</span> <span class="pre">ip_address]</span></code> - Player IP address
<strong>UDPPORT (31)</strong>: <code class="docutils literal notranslate"><span class="pre">[GUSHORT:</span> <span class="pre">udp_port]</span></code> - UDP port
<strong>ALIGNMENT (32)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">ap_value]</span></code> - Alignment Points
<strong>ADDITFLAGS (33)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">flags]</span></code> - Additional player flags
<strong>ACCOUNTNAME (34)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">length][string]</span></code> - Account name
<strong>BODYIMG (35)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">length][string]</span></code> - Body image
<strong>RATING (36)</strong>: <code class="docutils literal notranslate"><span class="pre">[GFLOAT:</span> <span class="pre">rating][GFLOAT:</span> <span class="pre">deviation]</span></code> - ELO rating
<strong>GATTRIB1-30 (37-74)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">length][string]</span></code> - Custom attributes
<strong>Z (45)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">(z_pos</span> <span class="pre">+</span> <span class="pre">50)]</span></code> - Z position
<strong>GMAPLEVELX (43)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">gmap_x]</span></code> - GMAP level X
<strong>GMAPLEVELY (44)</strong>: <code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">gmap_y]</span></code> - GMAP level Y</p>
</section>
</section>
<section id="remote-control-packets-pli-rc">
<h2>Remote Control Packets (PLI_RC_*)<a class="headerlink" href="#remote-control-packets-pli-rc" title="Link to this heading"></a></h2>
<p>These packets are used by RC (Remote Control) clients for server administration.</p>
<section id="pli-rc-serveroptionsget-51-get-server-options">
<h3>PLI_RC_SERVEROPTIONSGET (51) - Get Server Options<a class="headerlink" href="#pli-rc-serveroptionsget-51-get-server-options" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC requests server configuration</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-rc-serveroptionsset-52-set-server-options">
<h3>PLI_RC_SERVEROPTIONSSET (52) - Set Server Options<a class="headerlink" href="#pli-rc-serveroptionsset-52-set-server-options" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC updates server configuration</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">options_data</span><span class="p">]</span> <span class="o">//</span> <span class="n">Server</span> <span class="n">configuration</span> <span class="n">text</span>
</pre></div>
</div>
</section>
<section id="pli-rc-folderconfigget-53-get-folder-config">
<h3>PLI_RC_FOLDERCONFIGGET (53) - Get Folder Config<a class="headerlink" href="#pli-rc-folderconfigget-53-get-folder-config" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC requests folder configuration</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-rc-folderconfigset-54-set-folder-config">
<h3>PLI_RC_FOLDERCONFIGSET (54) - Set Folder Config<a class="headerlink" href="#pli-rc-folderconfigset-54-set-folder-config" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC updates folder configuration</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">folder_config</span><span class="p">]</span> <span class="o">//</span> <span class="n">Folder</span> <span class="n">configuration</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-rc-playerpropsget-59-get-player-properties">
<h3>PLI_RC_PLAYERPROPSGET (59) - Get Player Properties<a class="headerlink" href="#pli-rc-playerpropsget-59-get-player-properties" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC requests player information</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">player_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">account</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="pli-rc-playerpropsset-60-set-player-properties">
<h3>PLI_RC_PLAYERPROPSSET (60) - Set Player Properties<a class="headerlink" href="#pli-rc-playerpropsset-60-set-player-properties" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC modifies player properties</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">player_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Target</span> <span class="n">player</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">prop_data</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Property</span> <span class="n">modifications</span>
</pre></div>
</div>
</section>
<section id="pli-rc-disconnectplayer-61-disconnect-player">
<h3>PLI_RC_DISCONNECTPLAYER (61) - Disconnect Player<a class="headerlink" href="#pli-rc-disconnectplayer-61-disconnect-player" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC kicks a player</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">player_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">to</span> <span class="n">disconnect</span>
</pre></div>
</div>
</section>
<section id="pli-rc-adminmessage-63-admin-message">
<h3>PLI_RC_ADMINMESSAGE (63) - Admin Message<a class="headerlink" href="#pli-rc-adminmessage-63-admin-message" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC sends server-wide message</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">message</span><span class="p">]</span> <span class="o">//</span> <span class="n">Admin</span> <span class="n">message</span> <span class="n">text</span>
</pre></div>
</div>
</section>
<section id="pli-rc-privadminmessage-64-private-admin-message">
<h3>PLI_RC_PRIVADMINMESSAGE (64) - Private Admin Message<a class="headerlink" href="#pli-rc-privadminmessage-64-private-admin-message" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC sends private message to player</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">player_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Target</span> <span class="n">player</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">message</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Private</span> <span class="n">message</span>
</pre></div>
</div>
</section>
<section id="pli-rc-serverflagsget-68-get-server-flags">
<h3>PLI_RC_SERVERFLAGSGET (68) - Get Server Flags<a class="headerlink" href="#pli-rc-serverflagsget-68-get-server-flags" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC requests server flags</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-rc-serverflagsset-69-set-server-flags">
<h3>PLI_RC_SERVERFLAGSSET (69) - Set Server Flags<a class="headerlink" href="#pli-rc-serverflagsset-69-set-server-flags" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC updates server flags</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">flags_data</span><span class="p">]</span> <span class="o">//</span> <span class="n">Server</span> <span class="n">flags</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-rc-accountadd-70-add-account">
<h3>PLI_RC_ACCOUNTADD (70) - Add Account<a class="headerlink" href="#pli-rc-accountadd-70-add-account" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC creates new player account</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">account_data</span><span class="p">]</span> <span class="o">//</span> <span class="n">Account</span> <span class="n">creation</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-rc-accountdel-71-delete-account">
<h3>PLI_RC_ACCOUNTDEL (71) - Delete Account<a class="headerlink" href="#pli-rc-accountdel-71-delete-account" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC deletes player account</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">account_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Account</span> <span class="n">to</span> <span class="n">delete</span>
</pre></div>
</div>
</section>
<section id="pli-rc-filebrowser-file-browser-operations">
<h3>PLI_RC_FILEBROWSER_* - File Browser Operations<a class="headerlink" href="#pli-rc-filebrowser-file-browser-operations" title="Link to this heading"></a></h3>
<p>Various file management operations for RC file browser functionality.</p>
</section>
</section>
<section id="npc-control-packets-pli-nc">
<h2>NPC Control Packets (PLI_NC_*)<a class="headerlink" href="#npc-control-packets-pli-nc" title="Link to this heading"></a></h2>
<p>These packets are used by NC (NPC Control) clients for NPC/content management.</p>
<section id="pli-nc-npcget-103-get-npc">
<h3>PLI_NC_NPCGET (103) - Get NPC<a class="headerlink" href="#pli-nc-npcget-103-get-npc" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NC requests NPC data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
</pre></div>
</div>
</section>
<section id="pli-nc-npcdelete-104-delete-npc">
<h3>PLI_NC_NPCDELETE (104) - Delete NPC<a class="headerlink" href="#pli-nc-npcdelete-104-delete-npc" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NC deletes an NPC</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
</pre></div>
</div>
</section>
<section id="pli-nc-npcscriptget-106-get-npc-script">
<h3>PLI_NC_NPCSCRIPTGET (106) - Get NPC Script<a class="headerlink" href="#pli-nc-npcscriptget-106-get-npc-script" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NC requests NPC script</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
</pre></div>
</div>
</section>
<section id="pli-nc-npcscriptset-109-set-npc-script">
<h3>PLI_NC_NPCSCRIPTSET (109) - Set NPC Script<a class="headerlink" href="#pli-nc-npcscriptset-109-set-npc-script" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NC updates NPC script</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>        <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
<span class="p">[</span><span class="n">GSTRING</span><span class="p">:</span> <span class="n">script</span><span class="p">]</span>     <span class="o">//</span> <span class="n">New</span> <span class="n">script</span> <span class="n">code</span>
</pre></div>
</div>
</section>
<section id="pli-nc-npcadd-111-add-npc">
<h3>PLI_NC_NPCADD (111) - Add NPC<a class="headerlink" href="#pli-nc-npcadd-111-add-npc" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NC creates new NPC</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GSTRING</span><span class="p">:</span> <span class="n">npc_info</span><span class="p">]</span> <span class="o">//</span> <span class="n">NPC</span> <span class="n">data</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span><span class="nb">id</span><span class="p">,</span><span class="nb">type</span><span class="p">,</span><span class="n">scripter</span><span class="p">,</span><span class="n">level</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span>
</pre></div>
</div>
</section>
<section id="pli-nc-weaponlistget-115-get-weapon-list">
<h3>PLI_NC_WEAPONLISTGET (115) - Get Weapon List<a class="headerlink" href="#pli-nc-weaponlistget-115-get-weapon-list" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NC requests weapon list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="pli-nc-weaponget-116-get-weapon">
<h3>PLI_NC_WEAPONGET (116) - Get Weapon<a class="headerlink" href="#pli-nc-weaponget-116-get-weapon" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NC requests weapon data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">weapon_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Weapon</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="pli-nc-weaponadd-117-add-weapon">
<h3>PLI_NC_WEAPONADD (117) - Add Weapon<a class="headerlink" href="#pli-nc-weaponadd-117-add-weapon" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NC creates/updates weapon</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">name_len</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Weapon</span> <span class="n">name</span> <span class="n">length</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">weapon_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Weapon</span> <span class="n">name</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">image_len</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Image</span> <span class="n">name</span> <span class="n">length</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">image_name</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Image</span> <span class="n">filename</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">script_code</span><span class="p">]</span> <span class="o">//</span> <span class="n">Weapon</span> <span class="n">script</span>
</pre></div>
</div>
</section>
</section>
<section id="special-packets">
<h2>Special Packets<a class="headerlink" href="#special-packets" title="Link to this heading"></a></h2>
<section id="pli-requestupdateboard-130-request-level-update">
<h3>PLI_REQUESTUPDATEBOARD (130) - Request Level Update<a class="headerlink" href="#pli-requestupdateboard-130-request-level-update" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client requests level board update</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">level_len</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Level</span> <span class="n">name</span> <span class="n">length</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">level_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Level</span> <span class="n">name</span>
<span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">mod_time</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Modification</span> <span class="n">time</span>
<span class="p">[</span><span class="n">GSHORT</span><span class="p">:</span> <span class="n">x</span><span class="p">]</span>          <span class="o">//</span> <span class="n">X</span> <span class="n">coordinate</span>
<span class="p">[</span><span class="n">GSHORT</span><span class="p">:</span> <span class="n">y</span><span class="p">]</span>          <span class="o">//</span> <span class="n">Y</span> <span class="n">coordinate</span>  
<span class="p">[</span><span class="n">GSHORT</span><span class="p">:</span> <span class="n">width</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Width</span>
<span class="p">[</span><span class="n">GSHORT</span><span class="p">:</span> <span class="n">height</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Height</span>
</pre></div>
</div>
</section>
<section id="pli-requesttext-152-request-server-text">
<h3>PLI_REQUESTTEXT (152) - Request Server Text<a class="headerlink" href="#pli-requesttext-152-request-server-text" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client requests server-stored value</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">key</span><span class="p">]</span> <span class="o">//</span> <span class="n">Key</span> <span class="n">to</span> <span class="n">retrieve</span>
</pre></div>
</div>
</section>
<section id="pli-sendtext-154-send-server-text">
<h3>PLI_SENDTEXT (154) - Send Server Text<a class="headerlink" href="#pli-sendtext-154-send-server-text" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client sets server-stored value</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">key_value</span><span class="p">]</span> <span class="o">//</span> <span class="s2">&quot;key=value&quot;</span> <span class="nb">format</span>
</pre></div>
</div>
</section>
<section id="pli-updategani-157-update-gani-animation">
<h3>PLI_UPDATEGANI (157) - Update GANI Animation<a class="headerlink" href="#pli-updategani-157-update-gani-animation" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client requests GANI bytecode update</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">checksum</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Local</span> <span class="n">GANI</span> <span class="n">checksum</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">gani_name</span><span class="p">]</span>  <span class="o">//</span> <span class="n">GANI</span> <span class="n">name</span> <span class="p">(</span><span class="n">without</span> <span class="o">.</span><span class="n">gani</span> <span class="n">extension</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pli-updatescript-158-update-weapon-script">
<h3>PLI_UPDATESCRIPT (158) - Update Weapon Script<a class="headerlink" href="#pli-updatescript-158-update-weapon-script" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client requests weapon bytecode</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">weapon_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Weapon</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="pli-updateclass-161-update-npc-class">
<h3>PLI_UPDATECLASS (161) - Update NPC Class<a class="headerlink" href="#pli-updateclass-161-update-npc-class" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client requests class bytecode</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GINT5</span><span class="p">:</span> <span class="n">checksum</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Local</span> <span class="k">class</span><span class="w"> </span><span class="nc">checksum</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">class_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Class</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="pli-updatepackagerequestfile-159-update-package-request">
<h3>PLI_UPDATEPACKAGEREQUESTFILE (159) - Update Package Request<a class="headerlink" href="#pli-updatepackagerequestfile-159-update-package-request" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Client requests update package files</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">name_len</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Package</span> <span class="n">name</span> <span class="n">length</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">package_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Update</span> <span class="n">package</span> <span class="n">name</span>
<span class="p">[</span><span class="n">GUCHAR</span><span class="p">:</span> <span class="n">install_type</span><span class="p">]</span> <span class="o">//</span> <span class="mi">1</span><span class="o">=</span><span class="n">install</span><span class="p">,</span> <span class="mi">2</span><span class="o">=</span><span class="n">reinstall</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">checksums</span><span class="p">]</span>    <span class="o">//</span> <span class="n">File</span> <span class="n">checksums</span> <span class="p">(</span><span class="n">GUINT5</span> <span class="n">per</span> <span class="n">file</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="encryption-details-encrypt-gen-5">
<h2>Encryption Details (ENCRYPT_GEN_5)<a class="headerlink" href="#encryption-details-encrypt-gen-5" title="Link to this heading"></a></h2>
<section id="key-generation">
<h3>Key Generation<a class="headerlink" href="#key-generation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Initial key set via PLI_SET_ENC_KEY or login</p></li>
<li><p>Iterator starts at predefined value based on generation</p></li>
<li><p>Key stream generated using: <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">=</span> <span class="pre">(key</span> <span class="pre">+</span> <span class="pre">iterator++)</span> <span class="pre">&amp;</span> <span class="pre">0xFF</span></code></p></li>
</ul>
</section>
<section id="encryption-limits">
<h3>Encryption Limits<a class="headerlink" href="#encryption-limits" title="Link to this heading"></a></h3>
<p>Encryption is limited based on compression type:</p>
<ul class="simple">
<li><p>COMPRESS_UNCOMPRESSED: 40 bytes</p></li>
<li><p>COMPRESS_ZLIB: 4096 bytes</p></li>
<li><p>COMPRESS_BZ2: 65536 bytes</p></li>
</ul>
</section>
<section id="decryption-process">
<h3>Decryption Process<a class="headerlink" href="#decryption-process" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Extract compression type (first byte)</p></li>
<li><p>Apply XOR decryption with generated key stream</p></li>
<li><p>Decompress using appropriate algorithm</p></li>
<li><p>Parse individual packets</p></li>
</ol>
</section>
</section>
<section id="data-type-reference">
<h2>Data Type Reference<a class="headerlink" href="#data-type-reference" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Encoding</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GCHAR</p></td>
<td><p>1 byte</p></td>
<td><p>Signed char + 32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(char)value</span> <span class="pre">+</span> <span class="pre">32</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>GUCHAR</p></td>
<td><p>1 byte</p></td>
<td><p>Unsigned char + 32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(unsigned</span> <span class="pre">char)value</span> <span class="pre">+</span> <span class="pre">32</span></code></p></td>
</tr>
<tr class="row-even"><td><p>GSHORT</p></td>
<td><p>2 bytes</p></td>
<td><p>16-bit value</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">((value</span> <span class="pre">&gt;&gt;</span> <span class="pre">6)</span> <span class="pre">+</span> <span class="pre">32)</span> <span class="pre">+</span> <span class="pre">((value</span> <span class="pre">&amp;</span> <span class="pre">0x3F)</span> <span class="pre">+</span> <span class="pre">32)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>GUSHORT</p></td>
<td><p>2 bytes</p></td>
<td><p>Unsigned 16-bit</p></td>
<td><p>Same as GSHORT</p></td>
</tr>
<tr class="row-even"><td><p>GINT</p></td>
<td><p>3 bytes</p></td>
<td><p>24-bit value</p></td>
<td><p>Custom 3-byte encoding</p></td>
</tr>
<tr class="row-odd"><td><p>GINT4</p></td>
<td><p>4 bytes</p></td>
<td><p>32-bit value</p></td>
<td><p>Custom 4-byte encoding</p></td>
</tr>
<tr class="row-even"><td><p>GINT5/GUINT5</p></td>
<td><p>5 bytes</p></td>
<td><p>Large values/timestamps</p></td>
<td><p>Custom 5-byte encoding</p></td>
</tr>
<tr class="row-odd"><td><p>GSTRING</p></td>
<td><p>Variable</p></td>
<td><p>Length-prefixed string</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[GCHAR:</span> <span class="pre">len][string_data]</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="implementation-notes">
<h2>Implementation Notes<a class="headerlink" href="#implementation-notes" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Byte Order</strong>: All multi-byte values use little-endian encoding before G-encoding</p></li>
<li><p><strong>String Termination</strong>: Regular strings are null-terminated or delimiter-terminated</p></li>
<li><p><strong>Coordinate System</strong>:</p>
<ul class="simple">
<li><p>Tiles: 64×64 grid (0-63)</p></li>
<li><p>Half-tiles: 128×128 grid (0-127)</p></li>
<li><p>Pixels: Multiply half-tiles by 16</p></li>
</ul>
</li>
<li><p><strong>Error Handling</strong>: Invalid packets should be ignored, not cause disconnection</p></li>
<li><p><strong>Version Compatibility</strong>: Some packets vary by client version (check version ID)</p></li>
</ol>
</section>
<section id="server-to-client-packets-plo">
<h2>Server-to-Client Packets (PLO_*)<a class="headerlink" href="#server-to-client-packets-plo" title="Link to this heading"></a></h2>
<section id="plo-levelboard-0-level-board-data">
<h3>PLO_LEVELBOARD (0) - Level Board Data<a class="headerlink" href="#plo-levelboard-0-level-board-data" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player enters level or requests level data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">64</span><span class="n">x64</span> <span class="n">tile_data</span><span class="p">]</span>    <span class="o">//</span> <span class="mi">8192</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">tile</span> <span class="n">data</span> <span class="p">(</span><span class="mi">2</span> <span class="nb">bytes</span> <span class="n">per</span> <span class="n">tile</span><span class="p">)</span>
</pre></div>
</div>
<p>Each tile is encoded as a 16-bit value representing the tile type.</p>
</section>
<section id="plo-levellink-1-level-link-warp">
<h3>PLO_LEVELLINK (1) - Level Link/Warp<a class="headerlink" href="#plo-levellink-1-level-link-warp" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Level has warp/link destinations</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">dest_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Destination</span> <span class="n">X</span> <span class="n">coordinate</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">dest_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Destination</span> <span class="n">Y</span> <span class="n">coordinate</span>  
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">new_x</span><span class="p">]</span>       <span class="o">//</span> <span class="n">New</span> <span class="n">X</span> <span class="n">position</span> <span class="n">after</span> <span class="n">warp</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">new_y</span><span class="p">]</span>       <span class="o">//</span> <span class="n">New</span> <span class="n">Y</span> <span class="n">position</span> <span class="n">after</span> <span class="n">warp</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">dest_level</span><span class="p">]</span> <span class="o">//</span> <span class="n">Destination</span> <span class="n">level</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="plo-baddyprops-2-baddy-properties">
<h3>PLO_BADDYPROPS (2) - Baddy Properties<a class="headerlink" href="#plo-baddyprops-2-baddy-properties" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Baddy properties change or player enters level</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">baddy_id</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Baddy</span> <span class="n">identifier</span>
<span class="p">[</span><span class="n">BADDY_PROPS</span><span class="o">...</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Variable</span> <span class="n">baddy</span> <span class="nb">property</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-npcprops-3-npc-properties">
<h3>PLO_NPCPROPS (3) - NPC Properties<a class="headerlink" href="#plo-npcprops-3-npc-properties" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NPC properties change or player enters level</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
<span class="p">[</span><span class="n">NPC_PROPS</span><span class="o">...</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Variable</span> <span class="n">NPC</span> <span class="nb">property</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-levelchest-4-level-chest">
<h3>PLO_LEVELCHEST (4) - Level Chest<a class="headerlink" href="#plo-levelchest-4-level-chest" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player opens chest or enters level with chests</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">state</span><span class="p">]</span>       <span class="o">//</span> <span class="mi">0</span><span class="o">=</span><span class="n">closed</span><span class="p">,</span> <span class="mi">1</span><span class="o">=</span><span class="n">opened</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Chest</span> <span class="n">X</span> <span class="n">coordinate</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Chest</span> <span class="n">Y</span> <span class="n">coordinate</span>
</pre></div>
</div>
</section>
<section id="plo-levelsign-5-level-sign">
<h3>PLO_LEVELSIGN (5) - Level Sign<a class="headerlink" href="#plo-levelsign-5-level-sign" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player enters level with signs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Sign</span> <span class="n">X</span> <span class="n">coordinate</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Sign</span> <span class="n">Y</span> <span class="n">coordinate</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">sign_text</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Sign</span> <span class="n">text</span> <span class="n">content</span>
</pre></div>
</div>
</section>
<section id="plo-levelname-6-level-name">
<h3>PLO_LEVELNAME (6) - Level Name<a class="headerlink" href="#plo-levelname-6-level-name" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player enters level</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">level_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Current</span> <span class="n">level</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="plo-boardmodify-7-board-modification">
<h3>PLO_BOARDMODIFY (7) - Board Modification<a class="headerlink" href="#plo-boardmodify-7-board-modification" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Another player modifies tiles</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">start_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Starting</span> <span class="n">X</span> <span class="n">coordinate</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">start_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Starting</span> <span class="n">Y</span> <span class="n">coordinate</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">width</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Modification</span> <span class="n">width</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">height</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Modification</span> <span class="n">height</span>
<span class="p">[</span><span class="n">TILE_DATA</span><span class="o">...</span><span class="p">]</span>       <span class="o">//</span> <span class="n">New</span> <span class="n">tile</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-otherplprops-8-other-player-properties">
<h3>PLO_OTHERPLPROPS (8) - Other Player Properties<a class="headerlink" href="#plo-otherplprops-8-other-player-properties" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Other player’s properties change</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">identifier</span>
<span class="p">[</span><span class="n">PROPERTY_DATA</span><span class="o">...</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Player</span> <span class="nb">property</span> <span class="n">updates</span>
</pre></div>
</div>
</section>
<section id="plo-playerprops-9-own-player-properties">
<h3>PLO_PLAYERPROPS (9) - Own Player Properties<a class="headerlink" href="#plo-playerprops-9-own-player-properties" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Own player’s properties change</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">PROPERTY_DATA</span><span class="o">...</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Player</span> <span class="nb">property</span> <span class="n">updates</span>
</pre></div>
</div>
</section>
<section id="plo-isleader-10-level-leader-status">
<h3>PLO_ISLEADER (10) - Level Leader Status<a class="headerlink" href="#plo-isleader-10-level-leader-status" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player becomes level leader</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-bombadd-11-bomb-added">
<h3>PLO_BOMBADD (11) - Bomb Added<a class="headerlink" href="#plo-bombadd-11-bomb-added" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player places bomb</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">placed</span> <span class="n">bomb</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">X</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">power</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Bomb</span> <span class="n">power</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">timer</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Time</span> <span class="n">to</span> <span class="n">explosion</span>
</pre></div>
</div>
</section>
<section id="plo-bombdel-12-bomb-removed">
<h3>PLO_BOMBDEL (12) - Bomb Removed<a class="headerlink" href="#plo-bombdel-12-bomb-removed" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Bomb explodes or is removed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">placed</span> <span class="n">bomb</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">X</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span>
</pre></div>
</div>
</section>
<section id="plo-toall-13-chat-message">
<h3>PLO_TOALL (13) - Chat Message<a class="headerlink" href="#plo-toall-13-chat-message" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player sends public chat</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Sender</span> <span class="n">player</span> <span class="n">ID</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">message</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Chat</span> <span class="n">message</span>
</pre></div>
</div>
</section>
<section id="plo-playerwarp-14-player-warp">
<h3>PLO_PLAYERWARP (14) - Player Warp<a class="headerlink" href="#plo-playerwarp-14-player-warp" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player warps to new location</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">pixel_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">New</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="n">pixels</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">pixel_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">New</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="n">pixels</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>  
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">level_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">New</span> <span class="n">level</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="plo-warpfailed-15-warp-failed">
<h3>PLO_WARPFAILED (15) - Warp Failed<a class="headerlink" href="#plo-warpfailed-15-warp-failed" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player warp attempt fails</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span> <span class="o">-</span> <span class="n">client</span> <span class="n">returns</span> <span class="n">to</span> <span class="n">previous</span> <span class="n">position</span>
</pre></div>
</div>
</section>
<section id="plo-discmessage-16-disconnect-message">
<h3>PLO_DISCMESSAGE (16) - Disconnect Message<a class="headerlink" href="#plo-discmessage-16-disconnect-message" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player is being disconnected</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">reason</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Disconnect</span> <span class="n">reason</span>
</pre></div>
</div>
</section>
<section id="plo-horseadd-17-horse-added">
<h3>PLO_HORSEADD (17) - Horse Added<a class="headerlink" href="#plo-horseadd-17-horse-added" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Horse is spawned</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">added</span> <span class="n">horse</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">X</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">dir_bush</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Direction</span> <span class="o">+</span> <span class="n">bush</span> <span class="n">count</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">image</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Horse</span> <span class="n">image</span>
</pre></div>
</div>
</section>
<section id="plo-horsedel-18-horse-removed">
<h3>PLO_HORSEDEL (18) - Horse Removed<a class="headerlink" href="#plo-horsedel-18-horse-removed" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Horse is destroyed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">removed</span> <span class="n">horse</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">X</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span>
</pre></div>
</div>
</section>
<section id="plo-arrowadd-19-arrow-added">
<h3>PLO_ARROWADD (19) - Arrow Added<a class="headerlink" href="#plo-arrowadd-19-arrow-added" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player fires arrow</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">fired</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Starting</span> <span class="n">X</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Starting</span> <span class="n">Y</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">flags</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Direction</span> <span class="ow">and</span> <span class="n">flags</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">sprite</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Arrow</span> <span class="n">sprite</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">power</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Arrow</span> <span class="n">power</span>
</pre></div>
</div>
</section>
<section id="plo-firespy-20-fire-spy">
<h3>PLO_FIRESPY (20) - Fire Spy<a class="headerlink" href="#plo-firespy-20-fire-spy" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player uses fire spy</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">used</span> <span class="n">fire</span> <span class="n">spy</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">length_power</span><span class="p">]</span> <span class="o">//</span> <span class="n">Length</span> <span class="ow">and</span> <span class="n">power</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-throwcarried-21-throw-carried-object">
<h3>PLO_THROWCARRIED (21) - Throw Carried Object<a class="headerlink" href="#plo-throwcarried-21-throw-carried-object" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player throws carried object</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">threw</span> <span class="nb">object</span>
</pre></div>
</div>
</section>
<section id="plo-itemadd-22-item-added">
<h3>PLO_ITEMADD (22) - Item Added<a class="headerlink" href="#plo-itemadd-22-item-added" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Item is dropped or spawned</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">X</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">item_type</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Item</span> <span class="nb">type</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="plo-itemdel-23-item-removed">
<h3>PLO_ITEMDEL (23) - Item Removed<a class="headerlink" href="#plo-itemdel-23-item-removed" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Item is picked up or destroyed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">X</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span>
</pre></div>
</div>
</section>
<section id="plo-npcmoved-24-npc-moved">
<h3>PLO_NPCMOVED (24) - NPC Moved<a class="headerlink" href="#plo-npcmoved-24-npc-moved" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NPC changes position (hides NPC during level transitions)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
</pre></div>
</div>
</section>
<section id="plo-signature-25-player-signature">
<h3>PLO_SIGNATURE (25) - Player Signature<a class="headerlink" href="#plo-signature-25-player-signature" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player requests signature verification</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">signature</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Player</span> <span class="n">signature</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-npcaction-26-npc-action">
<h3>PLO_NPCACTION (26) - NPC Action<a class="headerlink" href="#plo-npcaction-26-npc-action" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NPC performs action</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
<span class="p">[</span><span class="n">ACTION_DATA</span><span class="o">...</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Action</span><span class="o">-</span><span class="n">specific</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-baddyhurt-27-baddy-hurt">
<h3>PLO_BADDYHURT (27) - Baddy Hurt<a class="headerlink" href="#plo-baddyhurt-27-baddy-hurt" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Baddy takes damage</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">baddy_id</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Baddy</span> <span class="n">identifier</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">damage</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Damage</span> <span class="n">amount</span>
</pre></div>
</div>
</section>
<section id="plo-flagset-28-flag-set">
<h3>PLO_FLAGSET (28) - Flag Set<a class="headerlink" href="#plo-flagset-28-flag-set" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Server or player sets a flag</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">flag_data</span><span class="p">]</span>  <span class="o">//</span> <span class="s2">&quot;flag_name=value&quot;</span> <span class="nb">format</span>
</pre></div>
</div>
</section>
<section id="plo-npcdel-29-npc-deleted">
<h3>PLO_NPCDEL (29) - NPC Deleted<a class="headerlink" href="#plo-npcdel-29-npc-deleted" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NPC is removed from level</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
</pre></div>
</div>
</section>
<section id="plo-filesendfailed-30-file-send-failed">
<h3>PLO_FILESENDFAILED (30) - File Send Failed<a class="headerlink" href="#plo-filesendfailed-30-file-send-failed" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Requested file could not be sent</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">filename</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Failed</span> <span class="n">file</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="plo-flagdel-31-flag-deleted">
<h3>PLO_FLAGDEL (31) - Flag Deleted<a class="headerlink" href="#plo-flagdel-31-flag-deleted" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Flag is removed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">flag_name</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Flag</span> <span class="n">name</span> <span class="n">to</span> <span class="n">delete</span>
</pre></div>
</div>
</section>
<section id="plo-showimg-32-show-image">
<h3>PLO_SHOWIMG (32) - Show Image<a class="headerlink" href="#plo-showimg-32-show-image" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player displays image</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">showing</span> <span class="n">image</span>
<span class="p">[</span><span class="n">IMAGE_DATA</span><span class="o">...</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Image</span> <span class="n">display</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-npcweaponadd-33-npc-weapon-added">
<h3>PLO_NPCWEAPONADD (33) - NPC Weapon Added<a class="headerlink" href="#plo-npcweaponadd-33-npc-weapon-added" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player gains weapon from NPC</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">name_len</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Weapon</span> <span class="n">name</span> <span class="n">length</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">name</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Weapon</span> <span class="n">name</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="nb">type</span><span class="p">]</span>        <span class="o">//</span> <span class="n">Weapon</span> <span class="nb">type</span> <span class="p">(</span><span class="mi">0</span><span class="o">=</span><span class="n">client</span><span class="o">-</span><span class="n">side</span><span class="p">,</span> <span class="mi">1</span><span class="o">=</span><span class="n">server</span><span class="o">-</span><span class="n">side</span><span class="p">)</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">image_len</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Image</span> <span class="n">name</span> <span class="n">length</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">image</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Weapon</span> <span class="n">image</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">script_type</span><span class="p">]</span> <span class="o">//</span> <span class="n">Script</span> <span class="nb">type</span> <span class="n">flag</span>
<span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">script_len</span><span class="p">]</span> <span class="o">//</span> <span class="n">Script</span> <span class="n">length</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">script</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Weapon</span> <span class="n">script</span>
</pre></div>
</div>
</section>
<section id="plo-npcweapondel-34-npc-weapon-deleted">
<h3>PLO_NPCWEAPONDEL (34) - NPC Weapon Deleted<a class="headerlink" href="#plo-npcweapondel-34-npc-weapon-deleted" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Weapon is removed from player</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">weapon_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Weapon</span> <span class="n">to</span> <span class="n">remove</span>
</pre></div>
</div>
</section>
<section id="plo-rc-adminmessage-35-admin-message">
<h3>PLO_RC_ADMINMESSAGE (35) - Admin Message<a class="headerlink" href="#plo-rc-adminmessage-35-admin-message" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Server sends admin message</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">message</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Admin</span> <span class="n">message</span> <span class="n">text</span>
</pre></div>
</div>
</section>
<section id="plo-explosion-36-explosion">
<h3>PLO_EXPLOSION (36) - Explosion<a class="headerlink" href="#plo-explosion-36-explosion" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Explosion occurs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">caused</span> <span class="n">explosion</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">radius</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Explosion</span> <span class="n">radius</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">X</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">power</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Explosion</span> <span class="n">power</span>
</pre></div>
</div>
</section>
<section id="plo-privatemessage-37-private-message">
<h3>PLO_PRIVATEMESSAGE (37) - Private Message<a class="headerlink" href="#plo-privatemessage-37-private-message" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player receives PM</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">sender_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Sender</span> <span class="n">player</span> <span class="n">ID</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">message</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Private</span> <span class="n">message</span> <span class="n">text</span>
</pre></div>
</div>
</section>
<section id="plo-pushaway-38-push-away">
<h3>PLO_PUSHAWAY (38) - Push Away<a class="headerlink" href="#plo-pushaway-38-push-away" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player is pushed by force</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">PUSH_DATA</span><span class="o">...</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Push</span> <span class="n">force</span> <span class="ow">and</span> <span class="n">direction</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-levelmodtime-39-level-modification-time">
<h3>PLO_LEVELMODTIME (39) - Level Modification Time<a class="headerlink" href="#plo-levelmodtime-39-level-modification-time" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Level modification time is requested</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">mod_time</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Level</span> <span class="n">modification</span> <span class="n">timestamp</span>
</pre></div>
</div>
</section>
<section id="plo-hurtplayer-40-hurt-player">
<h3>PLO_HURTPLAYER (40) - Hurt Player<a class="headerlink" href="#plo-hurtplayer-40-hurt-player" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player takes damage</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">attacker_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Attacking</span> <span class="n">player</span> <span class="n">ID</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">hurt_dx</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Knockback</span> <span class="n">X</span> <span class="n">direction</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">hurt_dy</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Knockback</span> <span class="n">Y</span> <span class="n">direction</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">power</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Damage</span> <span class="n">amount</span>
<span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">ID</span> <span class="p">(</span><span class="k">if</span> <span class="n">NPC</span> <span class="n">attack</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="plo-newworldtime-42-new-world-time">
<h3>PLO_NEWWORLDTIME (42) - New World Time<a class="headerlink" href="#plo-newworldtime-42-new-world-time" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Server updates world time</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">time_data</span><span class="p">]</span>   <span class="o">//</span> <span class="n">World</span> <span class="n">time</span> <span class="n">information</span>
</pre></div>
</div>
</section>
<section id="plo-defaultweapon-43-default-weapon">
<h3>PLO_DEFAULTWEAPON (43) - Default Weapon<a class="headerlink" href="#plo-defaultweapon-43-default-weapon" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player gains default weapon</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">weapon_type</span><span class="p">]</span> <span class="o">//</span> <span class="n">Default</span> <span class="n">weapon</span> <span class="nb">type</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="plo-hasnpcserver-44-has-npc-server">
<h3>PLO_HASNPCSERVER (44) - Has NPC Server<a class="headerlink" href="#plo-hasnpcserver-44-has-npc-server" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Server indicates NPC-Server presence</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span> <span class="o">-</span> <span class="n">informs</span> <span class="n">client</span> <span class="ow">not</span> <span class="n">to</span> <span class="n">update</span> <span class="n">NPC</span> <span class="n">props</span>
</pre></div>
</div>
</section>
<section id="plo-fileuptodate-45-file-up-to-date">
<h3>PLO_FILEUPTODATE (45) - File Up To Date<a class="headerlink" href="#plo-fileuptodate-45-file-up-to-date" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Requested file is current</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">filename</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Current</span> <span class="n">file</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="plo-hitobjects-46-hit-objects">
<h3>PLO_HITOBJECTS (46) - Hit Objects<a class="headerlink" href="#plo-hitobjects-46-hit-objects" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Weapon hits objects/NPCs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">hit</span> <span class="p">(</span><span class="mi">0</span> <span class="k">for</span> <span class="n">NPC</span><span class="p">)</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">power</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Hit</span> <span class="n">power</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">X</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">tile_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">ID</span> <span class="p">(</span><span class="k">if</span> <span class="n">NPC</span> <span class="n">hit</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="plo-staffguilds-47-staff-guilds">
<h3>PLO_STAFFGUILDS (47) - Staff Guilds<a class="headerlink" href="#plo-staffguilds-47-staff-guilds" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Server sends staff guild information</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">guild_data</span><span class="p">]</span> <span class="o">//</span> <span class="n">Staff</span> <span class="n">guild</span> <span class="n">information</span>
</pre></div>
</div>
</section>
<section id="plo-triggeraction-48-trigger-action">
<h3>PLO_TRIGGERACTION (48) - Trigger Action<a class="headerlink" href="#plo-triggeraction-48-trigger-action" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Trigger action is executed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">triggered</span>
<span class="p">[</span><span class="n">ACTION_DATA</span><span class="o">...</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Action</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-playerwarp2-49-player-warp-v2">
<h3>PLO_PLAYERWARP2 (49) - Player Warp v2<a class="headerlink" href="#plo-playerwarp2-49-player-warp-v2" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player warps with GMAP coordinates</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">pixel_x</span><span class="p">]</span>     <span class="o">//</span> <span class="n">X</span> <span class="n">position</span> <span class="p">(</span><span class="n">pixels</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">pixel_y</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Y</span> <span class="n">position</span> <span class="p">(</span><span class="n">pixels</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">pixel_z</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Z</span> <span class="n">position</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">gmap_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">GMAP</span> <span class="n">level</span> <span class="n">X</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">gmap_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">GMAP</span> <span class="n">level</span> <span class="n">Y</span>
</pre></div>
</div>
</section>
<section id="plo-addplayer-55-add-player-legacy">
<h3>PLO_ADDPLAYER (55) - Add Player (Legacy)<a class="headerlink" href="#plo-addplayer-55-add-player-legacy" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player joins server (pre-v5.07)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">PLAYER_DATA</span><span class="o">...</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Player</span> <span class="n">information</span>
</pre></div>
</div>
</section>
<section id="plo-delplayer-56-delete-player-legacy">
<h3>PLO_DELPLAYER (56) - Delete Player (Legacy)<a class="headerlink" href="#plo-delplayer-56-delete-player-legacy" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player leaves server (pre-v5.07)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">who</span> <span class="n">left</span>
</pre></div>
</div>
</section>
<section id="plo-largefilestart-68-large-file-start">
<h3>PLO_LARGEFILESTART (68) - Large File Start<a class="headerlink" href="#plo-largefilestart-68-large-file-start" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Large file transfer begins</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">filename</span><span class="p">]</span>   <span class="o">//</span> <span class="n">File</span> <span class="n">being</span> <span class="n">transferred</span>
<span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">file_size</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Total</span> <span class="n">file</span> <span class="n">size</span>
</pre></div>
</div>
</section>
<section id="plo-largefileend-69-large-file-end">
<h3>PLO_LARGEFILEEND (69) - Large File End<a class="headerlink" href="#plo-largefileend-69-large-file-end" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Large file transfer completes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">filename</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Completed</span> <span class="n">file</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="plo-rc-chat-74-rc-chat">
<h3>PLO_RC_CHAT (74) - RC Chat<a class="headerlink" href="#plo-rc-chat-74-rc-chat" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: RC client chat message</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">message</span><span class="p">]</span>    <span class="o">//</span> <span class="n">RC</span> <span class="n">chat</span> <span class="n">message</span>
</pre></div>
</div>
</section>
<section id="plo-profile-75-player-profile">
<h3>PLO_PROFILE (75) - Player Profile<a class="headerlink" href="#plo-profile-75-player-profile" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Profile information response</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">profile_data</span><span class="p">]</span> <span class="o">//</span> <span class="n">Player</span> <span class="n">profile</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-servertext-82-server-text-response">
<h3>PLO_SERVERTEXT (82) - Server Text Response<a class="headerlink" href="#plo-servertext-82-server-text-response" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Response to PLI_REQUESTTEXT/PLI_SENDTEXT</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">response</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Server</span> <span class="n">text</span> <span class="n">response</span>
</pre></div>
</div>
</section>
<section id="plo-largefilesize-84-large-file-size">
<h3>PLO_LARGEFILESIZE (84) - Large File Size<a class="headerlink" href="#plo-largefilesize-84-large-file-size" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Large file size notification</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">file_size</span><span class="p">]</span>  <span class="o">//</span> <span class="n">File</span> <span class="n">size</span> <span class="ow">in</span> <span class="nb">bytes</span>
</pre></div>
</div>
</section>
<section id="plo-rawdata-100-raw-data">
<h3>PLO_RAWDATA (100) - Raw Data<a class="headerlink" href="#plo-rawdata-100-raw-data" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Raw binary data transfer</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GINT3</span><span class="p">:</span> <span class="n">data_length</span><span class="p">]</span> <span class="o">//</span> <span class="n">Length</span> <span class="n">of</span> <span class="n">raw</span> <span class="n">data</span>
<span class="p">[</span><span class="n">RAW_DATA</span><span class="o">...</span><span class="p">]</span>        <span class="o">//</span> <span class="n">Raw</span> <span class="n">binary</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-boardpacket-101-board-packet">
<h3>PLO_BOARDPACKET (101) - Board Packet<a class="headerlink" href="#plo-boardpacket-101-board-packet" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Special board data transfer</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">BOARD_DATA</span><span class="o">...</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Board</span><span class="o">-</span><span class="n">specific</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-file-102-file-data">
<h3>PLO_FILE (102) - File Data<a class="headerlink" href="#plo-file-102-file-data" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: File content transfer</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">file_type</span><span class="p">]</span>   <span class="o">//</span> <span class="n">File</span> <span class="nb">type</span> <span class="n">indicator</span>
<span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">file_size</span><span class="p">]</span>  <span class="o">//</span> <span class="n">File</span> <span class="n">size</span>
<span class="p">[</span><span class="n">FILE_DATA</span><span class="o">...</span><span class="p">]</span>       <span class="o">//</span> <span class="n">File</span> <span class="n">content</span>
</pre></div>
</div>
</section>
<section id="plo-updatepackagesize-105-update-package-size">
<h3>PLO_UPDATEPACKAGESIZE (105) - Update Package Size<a class="headerlink" href="#plo-updatepackagesize-105-update-package-size" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Update package download size</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">name_len</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Package</span> <span class="n">name</span> <span class="n">length</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">package</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Package</span> <span class="n">name</span>
<span class="p">[</span><span class="n">GUINT5</span><span class="p">:</span> <span class="n">total_size</span><span class="p">]</span> <span class="o">//</span> <span class="n">Total</span> <span class="n">download</span> <span class="n">size</span>
</pre></div>
</div>
</section>
<section id="plo-updatepackagedone-106-update-package-done">
<h3>PLO_UPDATEPACKAGEDONE (106) - Update Package Done<a class="headerlink" href="#plo-updatepackagedone-106-update-package-done" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Update package download complete</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">package</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Completed</span> <span class="n">package</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="plo-boardlayer-107-board-layer">
<h3>PLO_BOARDLAYER (107) - Board Layer<a class="headerlink" href="#plo-boardlayer-107-board-layer" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Additional level layer data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">layer_id</span><span class="p">]</span>    <span class="o">//</span> <span class="n">Layer</span> <span class="n">identifier</span>
<span class="p">[</span><span class="n">LAYER_DATA</span><span class="o">...</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Layer</span> <span class="n">tile</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-npcbytecode-131-npc-bytecode">
<h3>PLO_NPCBYTECODE (131) - NPC Bytecode<a class="headerlink" href="#plo-npcbytecode-131-npc-bytecode" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Compiled NPC script transfer</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GINT3</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
<span class="p">[</span><span class="n">BYTECODE_DATA</span><span class="o">...</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Compiled</span> <span class="n">script</span> <span class="n">bytecode</span>
</pre></div>
</div>
</section>
<section id="plo-ganiscript-134-gani-script">
<h3>PLO_GANISCRIPT (134) - GANI Script<a class="headerlink" href="#plo-ganiscript-134-gani-script" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: GANI animation bytecode</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GANI_BYTECODE</span><span class="o">...</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Compiled</span> <span class="n">GANI</span> <span class="n">script</span>
</pre></div>
</div>
</section>
<section id="plo-npcweaponscript-140-npc-weapon-script">
<h3>PLO_NPCWEAPONSCRIPT (140) - NPC Weapon Script<a class="headerlink" href="#plo-npcweaponscript-140-npc-weapon-script" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Weapon script transfer</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUSHORT</span><span class="p">:</span> <span class="n">info_len</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Script</span> <span class="n">info</span> <span class="n">length</span>
<span class="p">[</span><span class="n">SCRIPT_DATA</span><span class="o">...</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Weapon</span> <span class="n">script</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-npcdel2-150-npc-delete-v2">
<h3>PLO_NPCDEL2 (150) - NPC Delete v2<a class="headerlink" href="#plo-npcdel2-150-npc-delete-v2" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NPC removed from specific level</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">level_len</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Level</span> <span class="n">name</span> <span class="n">length</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">level_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Level</span> <span class="n">name</span>
<span class="p">[</span><span class="n">GINT3</span><span class="p">:</span> <span class="n">npc_id</span><span class="p">]</span>      <span class="o">//</span> <span class="n">NPC</span> <span class="n">identifier</span>
</pre></div>
</div>
</section>
<section id="plo-hidenpcs-151-hide-npcs">
<h3>PLO_HIDENPCS (151) - Hide NPCs<a class="headerlink" href="#plo-hidenpcs-151-hide-npcs" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: NPCs should be hidden</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-say2-153-say-sign-text">
<h3>PLO_SAY2 (153) - Say/Sign Text<a class="headerlink" href="#plo-say2-153-say-sign-text" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Display text/sign content</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">text</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Text</span> <span class="n">to</span> <span class="n">display</span>
</pre></div>
</div>
</section>
<section id="plo-freezeplayer2-154-freeze-player">
<h3>PLO_FREEZEPLAYER2 (154) - Freeze Player<a class="headerlink" href="#plo-freezeplayer2-154-freeze-player" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player movement is frozen</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-unfreezeplayer-155-unfreeze-player">
<h3>PLO_UNFREEZEPLAYER (155) - Unfreeze Player<a class="headerlink" href="#plo-unfreezeplayer-155-unfreeze-player" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player movement is restored</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-setactivelevel-156-set-active-level">
<h3>PLO_SETACTIVELEVEL (156) - Set Active Level<a class="headerlink" href="#plo-setactivelevel-156-set-active-level" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Set level for receiving objects</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">level_name</span><span class="p">]</span> <span class="o">//</span> <span class="n">Active</span> <span class="n">level</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="plo-move-165-move-command">
<h3>PLO_MOVE (165) - Move Command<a class="headerlink" href="#plo-move-165-move-command" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Server-initiated movement</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">MOVEMENT_DATA</span><span class="o">...</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Movement</span> <span class="n">command</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-ghostmode-170-ghost-mode">
<h3>PLO_GHOSTMODE (170) - Ghost Mode<a class="headerlink" href="#plo-ghostmode-170-ghost-mode" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player enters/exits ghost mode</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">ghost_state</span><span class="p">]</span> <span class="o">//</span> <span class="mi">1</span><span class="o">=</span><span class="n">enter</span> <span class="n">ghost</span><span class="p">,</span> <span class="mi">0</span><span class="o">=</span><span class="n">exit</span> <span class="n">ghost</span>
</pre></div>
</div>
</section>
<section id="plo-minimap-172-minimap-data">
<h3>PLO_MINIMAP (172) - Minimap Data<a class="headerlink" href="#plo-minimap-172-minimap-data" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Minimap information</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">minimap_file</span><span class="p">]</span> <span class="o">//</span> <span class="n">Minimap</span> <span class="n">image</span> <span class="n">file</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">offset_x</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Map</span> <span class="n">offset</span> <span class="n">X</span>
<span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">offset_y</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Map</span> <span class="n">offset</span> <span class="n">Y</span>
</pre></div>
</div>
</section>
<section id="plo-ghosttext-173-ghost-text">
<h3>PLO_GHOSTTEXT (173) - Ghost Text<a class="headerlink" href="#plo-ghosttext-173-ghost-text" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Text display in ghost mode</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">text</span><span class="p">]</span>       <span class="o">//</span> <span class="n">Ghost</span> <span class="n">mode</span> <span class="n">text</span>
</pre></div>
</div>
</section>
<section id="plo-ghosticon-174-ghost-icon">
<h3>PLO_GHOSTICON (174) - Ghost Icon<a class="headerlink" href="#plo-ghosticon-174-ghost-icon" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Ghost mode icon state</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">icon_state</span><span class="p">]</span>  <span class="o">//</span> <span class="mi">1</span><span class="o">=</span><span class="n">show</span> <span class="n">icon</span><span class="p">,</span> <span class="mi">0</span><span class="o">=</span><span class="n">hide</span> <span class="n">icon</span>
</pre></div>
</div>
</section>
<section id="plo-shoot-175-shoot-projectile-server">
<h3>PLO_SHOOT (175) - Shoot Projectile (Server)<a class="headerlink" href="#plo-shoot-175-shoot-projectile-server" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Server-initiated projectile</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SHOOT_DATA</span><span class="o">...</span><span class="p">]</span>      <span class="o">//</span> <span class="n">Projectile</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-fullstop-176-full-stop">
<h3>PLO_FULLSTOP (176) - Full Stop<a class="headerlink" href="#plo-fullstop-176-full-stop" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Disable client input/HUD</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span> <span class="o">-</span> <span class="n">freezes</span> <span class="n">client</span> <span class="n">completely</span>
</pre></div>
</div>
</section>
<section id="plo-serverwarp-178-server-warp">
<h3>PLO_SERVERWARP (178) - Server Warp<a class="headerlink" href="#plo-serverwarp-178-server-warp" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Warp to different server</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">server_info</span><span class="p">]</span> <span class="o">//</span> <span class="n">Server</span> <span class="n">connection</span> <span class="n">info</span>
</pre></div>
</div>
</section>
<section id="plo-rpgwindow-179-rpg-window">
<h3>PLO_RPGWINDOW (179) - RPG Window<a class="headerlink" href="#plo-rpgwindow-179-rpg-window" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Display RPG-style window</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">WINDOW_DATA</span><span class="o">...</span><span class="p">]</span>     <span class="o">//</span> <span class="n">RPG</span> <span class="n">window</span> <span class="n">content</span>
</pre></div>
</div>
</section>
<section id="plo-statuslist-180-status-list">
<h3>PLO_STATUSLIST (180) - Status List<a class="headerlink" href="#plo-statuslist-180-status-list" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Player status information</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STATUS_DATA</span><span class="o">...</span><span class="p">]</span>     <span class="o">//</span> <span class="n">Status</span> <span class="nb">list</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-listprocesses-182-list-processes">
<h3>PLO_LISTPROCESSES (182) - List Processes<a class="headerlink" href="#plo-listprocesses-182-list-processes" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Request client process list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span> <span class="o">-</span> <span class="n">client</span> <span class="n">responds</span> <span class="k">with</span> <span class="n">process</span> <span class="nb">list</span>
</pre></div>
</div>
</section>
<section id="plo-updatepackageisupdated-187-package-updated">
<h3>PLO_UPDATEPACKAGEISUPDATED (187) - Package Updated<a class="headerlink" href="#plo-updatepackageisupdated-187-package-updated" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Notify client of package update</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">filename</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Updated</span> <span class="n">file</span> <span class="n">name</span>
</pre></div>
</div>
</section>
<section id="plo-move2-189-move-v2">
<h3>PLO_MOVE2 (189) - Move v2<a class="headerlink" href="#plo-move2-189-move-v2" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Enhanced movement command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GUINT</span><span class="p">:</span> <span class="n">player_id</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Player</span> <span class="n">to</span> <span class="n">move</span>
<span class="p">[</span><span class="n">MOVEMENT_DATA</span><span class="o">...</span><span class="p">]</span>   <span class="o">//</span> <span class="n">Enhanced</span> <span class="n">movement</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-shoot2-191-shoot-v2">
<h3>PLO_SHOOT2 (191) - Shoot v2<a class="headerlink" href="#plo-shoot2-191-shoot-v2" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Enhanced projectile (v5.07+)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ENHANCED_SHOOT</span><span class="o">...</span><span class="p">]</span>  <span class="o">//</span> <span class="n">Enhanced</span> <span class="n">projectile</span> <span class="n">data</span>
</pre></div>
</div>
</section>
<section id="plo-clearweapons-194-clear-weapons">
<h3>PLO_CLEARWEAPONS (194) - Clear Weapons<a class="headerlink" href="#plo-clearweapons-194-clear-weapons" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Remove all weapons from player</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">No</span> <span class="n">additional</span> <span class="n">data</span> <span class="o">-</span> <span class="n">clears</span> <span class="n">weapon</span> <span class="nb">list</span>
</pre></div>
</div>
</section>
<section id="plo-loadgani-253-load-gani">
<h3>PLO_LOADGANI (253) - Load GANI<a class="headerlink" href="#plo-loadgani-253-load-gani" title="Link to this heading"></a></h3>
<p><strong>Trigger</strong>: Load GANI animation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GCHAR</span><span class="p">:</span> <span class="n">name_len</span><span class="p">]</span>    <span class="o">//</span> <span class="n">GANI</span> <span class="n">name</span> <span class="n">length</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">gani_name</span><span class="p">]</span>  <span class="o">//</span> <span class="n">GANI</span> <span class="n">name</span>
<span class="p">[</span><span class="n">STRING</span><span class="p">:</span> <span class="n">setbackto</span><span class="p">]</span>  <span class="o">//</span> <span class="n">SETBACKTO</span> <span class="n">parameter</span>
</pre></div>
</div>
</section>
</section>
<section id="encryption-implementation-details">
<h2>Encryption Implementation Details<a class="headerlink" href="#encryption-implementation-details" title="Link to this heading"></a></h2>
<section id="encrypt-gen-5-key-stream-generation">
<h3>ENCRYPT_GEN_5 Key Stream Generation<a class="headerlink" href="#encrypt-gen-5-key-stream-generation" title="Link to this heading"></a></h3>
<p>The GEN_5 encryption uses an XOR-based stream cipher:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CEncryption</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">m_key</span><span class="p">;</span><span class="w">           </span><span class="c1">// Current encryption key</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">m_iterator</span><span class="p">;</span><span class="w">     </span><span class="c1">// Iterator for key generation</span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">m_limit</span><span class="p">;</span><span class="w">         </span><span class="c1">// Encryption byte limit</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">m_gen</span><span class="p">;</span><span class="w">          </span><span class="c1">// Encryption generation (5)</span>
<span class="w">    </span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ITERATOR_START</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x4A80B38</span><span class="p">,</span><span class="w"> </span><span class="mh">0x481C622</span><span class="p">,</span><span class="w"> </span><span class="mh">0x481C6A2</span><span class="p">,</span><span class="w"> </span><span class="mh">0x12345678</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">};</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">decrypt</span><span class="p">(</span><span class="n">CString</span><span class="o">&amp;</span><span class="w"> </span><span class="n">buffer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">m_limit</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">buffer</span><span class="p">.</span><span class="n">length</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">^=</span><span class="w"> </span><span class="p">(</span><span class="n">m_key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">m_iterator</span><span class="o">++</span><span class="p">);</span>
<span class="w">        </span><span class="n">m_iterator</span><span class="w"> </span><span class="o">&amp;=</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="compression-integration">
<h3>Compression Integration<a class="headerlink" href="#compression-integration" title="Link to this heading"></a></h3>
<p>GEN_5 protocol supports multiple compression methods:</p>
<ol class="arabic simple">
<li><p><strong>COMPRESS_UNCOMPRESSED (0x02)</strong>: No compression, 40-byte encryption limit</p></li>
<li><p><strong>COMPRESS_ZLIB (0x04)</strong>: Zlib compression, 4096-byte encryption limit</p></li>
<li><p><strong>COMPRESS_BZ2 (0x06)</strong>: Bzip2 compression, 65536-byte encryption limit</p></li>
</ol>
<p>The compression type affects both the compression algorithm and encryption limits.</p>
</section>
<section id="packet-bundle-processing">
<h3>Packet Bundle Processing<a class="headerlink" href="#packet-bundle-processing" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Outgoing (Client → Server):
1. Create packet bundle with individual packets
2. Compress bundle using specified method
3. Prepend compression type byte
4. Encrypt first N bytes (based on compression type)
5. Send with 2-byte length prefix

Incoming (Server → Client):
1. Read 2-byte length prefix
2. Read bundle data
3. Extract compression type (first byte)
4. Decrypt first N bytes using key stream
5. Decompress using specified method
6. Parse individual packets (newline-separated)
</pre></div>
</div>
<p>This documentation covers the core packet structures used in the Reborn protocol. Implementation should follow these exact formats for compatibility with existing servers and clients.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="overview.html" class="btn btn-neutral float-left" title="Protocol Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="encryption.html" class="btn btn-neutral float-right" title="Encryption Details" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, OpenReborn2 Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>